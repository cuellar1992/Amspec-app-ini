import{c as at,_ as Mi}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Bo6EfaUO.js";import{_ as ki}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-DwZBASTA.js";import{u as kt}from"./userService-BjsG0Y4Q.js";import{r as B,B as St,C as be,a as w,l as E,D as le,j as ee,f as A,p as O,F as Et,i as Tt,E as ye,w as q,G as Gt,H as Jt,I as Kt,h as oe,d as Pe,c as Je,u as z,e as d,n as Ue,g as Te,t as $,b as I,x as ot,J as Si,o as st,K as Qt,z as ie}from"./index-BEwWJCfq.js";import{Y as Ei,h as Lt,G as Ti,V as Li,S as $i}from"./transition-BQFT3kHB.js";import{T as ei}from"./trash-2-CYF10h7i.js";import{_ as Pi}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{X as Wi}from"./x-BBjIrXvj.js";import{_ as ti}from"./Modal-S6npld4a.js";/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=at("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=at("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=at("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),_e=B(null),Fe=B(!1);function lt(){const e=async()=>{Fe.value=!0;try{_e.value=await kt.getProfile(),await be.getMe()}catch(i){throw console.error("Error loading profile:",i),i}finally{Fe.value=!1}},t=async i=>{try{const n=await kt.updateProfile(i);_e.value=n,await be.getMe()}catch(n){throw console.error("Error updating profile:",n),n}};return{userProfile:St(_e),isLoading:St(Fe),loadProfile:e,updateProfile:t}}function Wt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),i.push.apply(i,n)}return i}function y(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Wt(Object(i),!0).forEach(function(n){_(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Wt(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Oi(e,t){if(e==null)return{};var i,n,a=function(s,l){if(s==null)return{};var o,c,u={},h=Object.keys(s);for(c=0;c<h.length;c++)o=h[c],l.indexOf(o)>=0||(u[o]=s[o]);return u}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}function se(e){return function(t){if(Array.isArray(t))return Ne(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,i){if(t){if(typeof t=="string")return Ne(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ne(t,i)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ne(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var Dt,Bi,ze,P=(Dt=function(e){/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var t={}.hasOwnProperty;function i(){for(var n=[],a=0;a<arguments.length;a++){var r=arguments[a];if(r){var s=typeof r;if(s==="string"||s==="number")n.push(r);else if(Array.isArray(r)){if(r.length){var l=i.apply(null,r);l&&n.push(l)}}else if(s==="object")if(r.toString===Object.prototype.toString)for(var o in r)t.call(r,o)&&r[o]&&n.push(o);else n.push(r.toString())}}return n.join(" ")}e.exports?(i.default=i,e.exports=i):window.classNames=i})()},Dt(ze={path:Bi,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(t==null&&ze.path)}},ze.exports),ze.exports),N=function(e){return function(t,i){if(!t)return e;var n;typeof t=="string"?n=t:i=t;var a=e;return n&&(a+="__"+n),a+(i?Object.keys(i).reduce(function(r,s){var l=i[s];return l&&(r+=" "+(typeof l=="boolean"?a+"--"+s:a+"--"+s+"_"+l)),r},""):"")}};function Ke(e,t,i){var n,a,r,s,l;function o(){var u=Date.now()-s;u<t&&u>=0?n=setTimeout(o,t-u):(n=null,i||(l=e.apply(r,a),r=a=null))}t==null&&(t=100);var c=function(){r=this,a=arguments,s=Date.now();var u=i&&!n;return n||(n=setTimeout(o,t)),u&&(l=e.apply(r,a),r=a=null),l};return c.clear=function(){n&&(clearTimeout(n),n=null)},c.flush=function(){n&&(l=e.apply(r,a),r=a=null,clearTimeout(n),n=null)},c}Ke.debounce=Ke;var Qe=Ke,v=function(){return v=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var a in t=arguments[i])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},v.apply(this,arguments)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ii(e,t){var i,n;return e&&t?(i=""+e+t[0].toUpperCase()+t.slice(1),n=e+"-"+t):(i=e||t,n=e||t),{name:i,classname:n}}function ni(e){return/^blob:/.test(e)}function Ot(e){return ni(e)||function(t){return/^data:/.test(t)}(e)}function ue(e){return!!(e&&e.constructor&&e.call&&e.apply)}function D(e){return e===void 0}function Ee(e){return typeof e=="object"&&e!==null}function et(e,t,i){var n={};return Ee(e)?(Object.keys(t).forEach(function(a){D(e[a])?n[a]=t[a]:Ee(t[a])?Ee(e[a])?n[a]=et(e[a],t[a],i[a]):n[a]=e[a]?t[a]:i[a]:t[a]===!0||t[a]===!1?n[a]=!!e[a]:n[a]=e[a]}),n):e?t:i}function Re(e){var t=Number(e);return Number.isNaN(t)?e:t}function Bt(e){return typeof(e=="number"||function(t){return typeof t=="object"&&t!==null}(e)&&toString.call(e)=="[object Number]")&&!ri(e)}function ri(e){return e!=e}function ai(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var we=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.type="manipulateImage",this.move=e,this.scale=t},ji=function(e,t){t===void 0&&(t={}),this.type="resize",this.directions=e,this.params=t},ht=function(e){this.type="move",this.directions=e},Hi=function(){function e(t,i,n,a,r){this.type="drag",this.nativeEvent=t,this.position=n,this.previousPosition=a,this.element=i,this.anchor=r}return e.prototype.shift=function(){var t=this,i=t.element,n=t.anchor,a=t.position;if(i){var r=i.getBoundingClientRect(),s=r.left,l=r.top;return{left:a.left-s-n.left,top:a.top-l-n.top}}return{left:0,top:0}},e}(),ct={name:"DraggableElement",props:{classname:{type:String}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(e){e.cancelable&&!this.disabled&&e.touches.length===1&&(this.touches=se(e.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),e.touches.length&&this.initAnchor(this.touches.reduce(function(t,i){return{clientX:t.clientX+i.clientX/e.touches.length,clientY:t.clientY+i.clientY/e.touches.length}},{clientX:0,clientY:0})),e.preventDefault&&e.preventDefault(),e.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(e){this.touches.length&&(this.processMove(e,e.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())},onMouseDown:function(e){if(!this.disabled){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.draggable.getBoundingClientRect(),i=t.left,n=t.right,a=t.bottom,r=t.top;this.anchor={left:e.clientX-i,top:e.clientY-r,bottom:a-e.clientY,right:n-e.clientX}},processMove:function(e,t){var i=se(t);if(this.touches.length){if(this.touches.length===1&&i.length===1){var n=this.$refs.draggable;this.$emit("drag",new Hi(e,n,{left:i[0].clientX,top:i[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=i}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}},emits:["drag","drag-end","leave","enter"]};ct.render=function(e,t,i,n,a,r){return w(),E("div",{ref:"draggable",class:i.classname,onTouchstart:t[1]||(t[1]=function(){return r.onTouchStart&&r.onTouchStart.apply(r,arguments)}),onMousedown:t[2]||(t[2]=function(){return r.onMouseDown&&r.onMouseDown.apply(r,arguments)}),onMouseover:t[3]||(t[3]=function(){return r.onMouseOver&&r.onMouseOver.apply(r,arguments)}),onMouseleave:t[4]||(t[4]=function(){return r.onMouseLeave&&r.onMouseLeave.apply(r,arguments)})},[le(e.$slots,"default")],34)};var Xe=N("vue-handler-wrapper"),oi={name:"HandlerWrapper",components:{DraggableElement:ct},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var e;if(this.horizontalPosition||this.verticalPosition){var t,i=ii(this.horizontalPosition,this.verticalPosition);e=Xe((_(t={},i.classname,!0),_(t,"disabled",this.disabled),t))}else e=Xe({disabled:this.disabled});return{root:e,draggable:Xe("draggable")}}},emits:["leave","enter","drag","drag-end"]};oi.render=function(e,t,i,n,a,r){var s=ee("DraggableElement");return w(),E("div",{class:r.classes.root},[A(s,{class:r.classes.draggable,onDrag:t[1]||(t[1]=function(l){return e.$emit("drag",l)}),onDragEnd:t[2]||(t[2]=function(l){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(l){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(l){return e.$emit("enter")})},{default:O(function(){return[le(e.$slots,"default")]}),_:3},8,["class"])],2)};var Ii=N("vue-line-wrapper"),si={name:"LineWrapper",components:{DraggableElement:ct},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var e;return Ii((_(e={},this.position,!0),_(e,"disabled",this.disabled),e))}},emits:["leave","enter","drag","drag-end"]};si.render=function(e,t,i,n,a,r){var s=ee("DraggableElement");return w(),E(s,{class:r.classname,onDrag:t[1]||(t[1]=function(l){return e.$emit("drag",l)}),onDragEnd:t[2]||(t[2]=function(l){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(l){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(l){return e.$emit("enter")})},{default:O(function(){return[le(e.$slots,"default")]}),_:3},8,["class"])};var Z=["left","right","top","bottom"],Ui=["left","right"],_i=["top","bottom"],Fi=["left","top"],Ni=["fill-area","fit-area","stencil","none"],jt={left:0,top:0,width:0,height:0};function Ht(e,t,i){return!(i=i||["width","height","left","top"]).some(function(n){return e[n]!==t[n]})}function G(e){return{left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height}}function de(e,t){return{left:e.left-t.left,top:e.top-t.top}}function j(e){return{left:e.left+e.width/2,top:e.top+e.height/2}}function xe(e,t){var i={left:0,top:0,right:0,bottom:0};return Z.forEach(function(n){var a=t[n],r=G(e)[n];i[n]=a!==void 0&&r!==void 0?n==="left"||n==="top"?Math.max(0,a-r):Math.max(0,r-a):0}),i}function V(e,t){return{left:e.left-t.left,top:e.top-t.top,width:e.width+t.left+t.right,height:e.height+t.top+t.bottom}}function We(e){return{left:-e.left,top:-e.top}}function U(e,t){return v(v({},e),{left:e.left+t.left,top:e.top+t.top})}function F(e,t,i,n){if(t!==1){if(i){var a=j(e);return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2+(i.left-a.left)*(1-t),top:e.top+e.height*(1-t)/2+(i.top-a.top)*(1-t)}}return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2,top:e.top+e.height*(1-t)/2}}return e}function x(e){return e.width/e.height}function fe(e,t){return Math.min(t.right!==void 0&&t.left!==void 0?(t.right-t.left)/e.width:1/0,t.bottom!==void 0&&t.top!==void 0?(t.bottom-t.top)/e.height:1/0)}function ge(e,t){var i={left:0,top:0},n=xe(e,t);return n.left&&n.left>0?i.left=n.left:n.right&&n.right>0&&(i.left=-n.right),n.top&&n.top>0?i.top=n.top:n.bottom&&n.bottom>0&&(i.top=-n.bottom),i}function Ye(e,t){var i;return t.minimum&&e<t.minimum?i=t.minimum:t.maximum&&e>t.maximum&&(i=t.maximum),i}function li(e,t){var i=x(e),n=x(t);return t.width<1/0&&t.height<1/0?i>n?{width:t.width,height:t.width/i}:{width:t.height*i,height:t.height}:t.width<1/0?{width:t.width,height:t.width/i}:t.height<1/0?{width:t.height*i,height:t.height}:e}function hi(e,t){var i=t*Math.PI/180;return{width:Math.abs(e.width*Math.cos(i))+Math.abs(e.height*Math.sin(i)),height:Math.abs(e.width*Math.sin(i))+Math.abs(e.height*Math.cos(i))}}function te(e,t){var i=t*Math.PI/180;return{left:e.left*Math.cos(i)-e.top*Math.sin(i),top:e.left*Math.sin(i)+e.top*Math.cos(i)}}function De(e,t){var i=xe(H(e,t),t);return i.left+i.right+i.top+i.bottom?i.left+i.right>i.top+i.bottom?Math.min((e.width+i.left+i.right)/e.width,fe(e,t)):Math.min((e.height+i.top+i.bottom)/e.height,fe(e,t)):1}function H(e,t,i){i===void 0&&(i=!1);var n=ge(e,t);return U(e,i?We(n):n)}function tt(e){return{width:e.right!==void 0&&e.left!==void 0?e.right-e.left:1/0,height:e.bottom!==void 0&&e.top!==void 0?e.bottom-e.top:1/0}}function Xi(e,t){return v(v({},e),{minWidth:Math.min(t.width,e.minWidth),minHeight:Math.min(t.height,e.minHeight),maxWidth:Math.min(t.width,e.maxWidth),maxHeight:Math.min(t.height,e.maxHeight)})}function ci(e,t,i){i===void 0&&(i=!0);var n={};return Z.forEach(function(a){var r=e[a],s=t[a];r!==void 0&&s!==void 0?n[a]=a==="left"||a==="top"?i?Math.max(r,s):Math.min(r,s):i?Math.min(r,s):Math.max(r,s):s!==void 0?n[a]=s:r!==void 0&&(n[a]=r)}),n}function Oe(e,t){return ci(e,t,!0)}function It(e){var t=e.size,i=e.aspectRatio,n=e.ignoreMinimum,a=e.sizeRestrictions;return!!((t.correctRatio||x(t)>=i.minimum&&x(t)<=i.maximum)&&t.height<=a.maxHeight&&t.width<=a.maxWidth&&t.width&&t.height&&(n||t.height>=a.minHeight&&t.width>=a.minWidth))}function Ut(e,t){return Math.pow(e.width-t.width,2)+Math.pow(e.height-t.height,2)}function Q(e){var t=e.width,i=e.height,n=e.sizeRestrictions,a={minimum:e.aspectRatio&&e.aspectRatio.minimum||0,maximum:e.aspectRatio&&e.aspectRatio.maximum||1/0},r={width:Math.max(n.minWidth,Math.min(n.maxWidth,t)),height:Math.max(n.minHeight,Math.min(n.maxHeight,i))};function s(c,u){return u===void 0&&(u=!1),c.reduce(function(h,f){return It({size:f,aspectRatio:a,sizeRestrictions:n,ignoreMinimum:u})&&(!h||Ut(f,{width:t,height:i})<Ut(h,{width:t,height:i}))?f:h},null)}var l=[];[a.minimum,a.maximum].forEach(function(c){c&&l.push({width:r.width,height:r.width/c,correctRatio:!0},{width:r.height*c,height:r.height,correctRatio:!0})}),It({size:r,aspectRatio:a,sizeRestrictions:n})&&l.push(r);var o=s(l)||s(l,!0);return o&&{width:o.width,height:o.height}}function it(e){var t=e.event,i=e.coordinates,n=e.positionRestrictions,a=n===void 0?{}:n,r=U(i,t.directions);return U(r,ge(r,a))}function Yi(e){var t=e.coordinates,i=e.transform,n=e.imageSize,a=e.sizeRestrictions,r=e.positionRestrictions,s=e.aspectRatio,l=e.visibleArea,o=function(u,h){return it({coordinates:u,positionRestrictions:r,event:new ht({left:h.left-u.left,top:h.top-u.top})})},c=v({},t);return(Array.isArray(i)?i:[i]).forEach(function(u){var h={};D((h=typeof u=="function"?u({coordinates:c,imageSize:n,visibleArea:l}):u).width)&&D(h.height)||(c=function(f,g){var m=v(v(v({},f),Q({width:g.width,height:g.height,sizeRestrictions:a,aspectRatio:s})),{left:0,top:0});return o(m,{left:f.left,top:f.top})}(c,v(v({},c),h))),D(h.left)&&D(h.top)||(c=o(c,v(v({},c),h)))}),c}function Vi(e){e.event;var t=e.getAreaRestrictions,i=e.boundaries,n=e.coordinates,a=e.visibleArea;e.aspectRatio;var r=e.stencilSize,s=e.sizeRestrictions,l=e.positionRestrictions;e.stencilReference;var o,c,u,h=v({},n),f=v({},a),g=v({},r);o=x(g),c=x(h),u===void 0&&(u=.001),(o===0||c===0?Math.abs(c-o)<u:Math.abs(c/o)<1+u&&Math.abs(c/o)>1-u)||(h=v(v({},h),Q({sizeRestrictions:s,width:h.width,height:h.height,aspectRatio:{minimum:x(g),maximum:x(g)}})));var m=De(f=F(f,h.width*i.width/(f.width*g.width)),t({visibleArea:f,type:"resize"}));return m!==1&&(f=F(f,m),h=F(h,m)),f=H(f=U(f,de(j(h),j(f))),t({visibleArea:f,type:"move"})),{coordinates:h=H(h,Oe(G(f),l)),visibleArea:f}}function Zi(e){var t=e.event,i=e.getAreaRestrictions,n=e.boundaries,a=e.coordinates,r=e.visibleArea;e.aspectRatio,e.stencilSize,e.sizeRestrictions;var s=e.positionRestrictions;e.stencilReference;var l=v({},a),o=v({},r);if(a&&r&&t.type!=="manipulateImage"){var c={width:0,height:0};o.width,n.width,x(n)>x(l)?(c.height=.8*n.height,c.width=c.height*x(l)):(c.width=.8*n.width,c.height=c.width*x(l));var u=De(o=F(o,l.width*n.width/(o.width*c.width)),i({visibleArea:o,type:"resize"}));o=F(o,u),u!==1&&(c.height/=u,c.width/=u),o=H(o=U(o,de(j(l),j(o))),i({visibleArea:o,type:"move"})),l=H(l,Oe(G(o),s))}return{coordinates:l,visibleArea:o}}function qi(e){var t=e.event,i=e.coordinates,n=e.visibleArea,a=e.getAreaRestrictions,r=v({},n),s=v({},i);if(t.type==="setCoordinates"){var l=Math.max(0,s.width-r.width),o=Math.max(0,s.height-r.height);l>o?r=F(r,Math.min(s.width/r.width,fe(r,a({visibleArea:r,type:"resize"})))):o>l&&(r=F(r,Math.min(s.height/r.height,fe(r,a({visibleArea:r,type:"resize"}))))),r=H(r=U(r,We(ge(s,G(r)))),a({visibleArea:r,type:"move"}))}return{visibleArea:r,coordinates:s}}function Gi(e){var t=e.imageSize,i=e.visibleArea,n=e.coordinates,a=i||t;return{left:(i?i.left:0)+a.width/2-n.width/2,top:(i?i.top:0)+a.height/2-n.height/2}}function Ji(e){var t=e.imageSize,i=e.visibleArea,n=e.aspectRatio,a=e.sizeRestrictions,r=i||t,s=Math.min(n.maximum||1/0,Math.max(n.minimum||0,x(r))),l=r.width<r.height?{width:.8*r.width,height:.8*r.width/s}:{height:.8*r.height,width:.8*r.height*s};return Q(v(v({},l),{aspectRatio:n,sizeRestrictions:a}))}function Ki(e){var t,i,n=e.imageSize,a=e.visibleArea,r=e.boundaries,s=e.aspectRatio,l=e.sizeRestrictions,o=e.stencilSize,c=a||n;return x(c)>x(r)?i=(t=o.height*c.height/r.height)*x(o):t=(i=o.width*c.width/r.width)/x(o),Q({width:i,height:t,aspectRatio:s,sizeRestrictions:l})}function Qi(e){var t=e.getAreaRestrictions,i=e.coordinates,n=e.imageSize,a=x(e.boundaries);if(i){var r={height:Math.max(i.height,n.height),width:Math.max(i.width,n.width)},s=li({width:x(r)>a?r.width:r.height*a,height:x(r)>a?r.width/a:r.height},tt(t())),l={left:i.left+i.width/2-s.width/2,top:i.top+i.height/2-s.height/2,width:s.width,height:s.height},o=xe(i,G(v({left:0,top:0},n))),c={};return!o.left&&!o.right&&l.width<=n.width&&(c.left=0,c.right=n.width),!o.top&&!o.bottom&&l.height<=n.height&&(c.top=0,c.bottom=n.height),H(l,c)}var u=x(n);return s={height:u>a?n.height:n.width/a,width:u>a?n.height*a:n.width},{left:n.width/2-s.width/2,top:n.height/2-s.height/2,width:s.width,height:s.height}}function Ce(e,t){return ci(e,G(t))}function en(e){var t=e.event,i=e.coordinates,n=e.visibleArea,a=e.sizeRestrictions,r=e.getAreaRestrictions,s=e.positionRestrictions,l=e.adjustStencil,o=t.scale,c=t.move,u=v({},n),h=v({},i),f=1,g=1,m=o.factor&&Math.abs(o.factor-1)>.001;u=U(u,{left:c.left||0,top:c.top||0});var p={stencil:{minimum:Math.max(a.minWidth?a.minWidth/h.width:0,a.minHeight?a.minHeight/h.height:0),maximum:Math.min(a.maxWidth?a.maxWidth/h.width:1/0,a.maxHeight?a.maxHeight/h.height:1/0,fe(h,s))},area:{maximum:fe(u,r({visibleArea:u,type:"resize"}))}};o.factor&&m&&(o.factor<1?(g=Math.max(o.factor,p.stencil.minimum))>1&&(g=1):o.factor>1&&(g=Math.min(o.factor,Math.min(p.area.maximum,p.stencil.maximum)))<1&&(g=1)),g&&(u=F(u,g,o.center));var b=i.left-n.left,T=n.width+n.left-(i.width+i.left),L=i.top-n.top,W=n.height+n.top-(i.height+i.top);return u=H(u=U(u,ge(u,{left:s.left!==void 0?s.left-b*g:void 0,top:s.top!==void 0?s.top-L*g:void 0,bottom:s.bottom!==void 0?s.bottom+W*g:void 0,right:s.right!==void 0?s.right+T*g:void 0})),r({visibleArea:u,type:"move"})),h.width=h.width*g,h.height=h.height*g,h.left=u.left+b*g,h.top=u.top+L*g,h=H(h,Oe(G(u),s)),o.factor&&m&&l&&(o.factor>1?f=Math.min(p.area.maximum,o.factor)/g:o.factor<1&&(f=Math.max(h.height/u.height,h.width/u.width,o.factor/g)),f!==1&&(u=U(u=H(u=F(u,f,o.factor>1?o.center:j(h)),r({visibleArea:u,type:"move"})),We(ge(h,G(u)))))),{coordinates:h,visibleArea:u}}function tn(e){var t=e.aspectRatio,i=e.getAreaRestrictions,n=e.coordinates,a=e.visibleArea,r=e.sizeRestrictions,s=e.positionRestrictions,l=e.imageSize,o=e.previousImageSize,c=e.angle,u=v({},n),h=v({},a),f=te(j(v({left:0,top:0},o)),c);return(u=v(v({},Q({sizeRestrictions:r,aspectRatio:t,width:u.width,height:u.height})),te(j(u),c))).left-=f.left-l.width/2+u.width/2,u.top-=f.top-l.height/2+u.height/2,h=F(h,De(h,i({visibleArea:h,type:"resize"}))),{coordinates:u=H(u,s),visibleArea:h=H(h=U(h,de(j(u),j(n))),i({visibleArea:h,type:"move"}))}}function nn(e){var t=e.flip,i=e.previousFlip,n=e.rotate,a=e.getAreaRestrictions,r=e.coordinates,s=e.visibleArea,l=e.imageSize,o=v({},r),c=v({},s),u=i.horizontal!==t.horizontal,h=i.vertical!==t.vertical;if(u||h){var f=te({left:l.width/2,top:l.height/2},-n),g=te(j(o),-n),m=te({left:u?f.left-(g.left-f.left):g.left,top:h?f.top-(g.top-f.top):g.top},n);o=U(o,de(m,j(o))),g=te(j(c),-n),c=H(c=U(c,de(m=te({left:u?f.left-(g.left-f.left):g.left,top:h?f.top-(g.top-f.top):g.top},n),j(c))),a({visibleArea:c,type:"move"}))}return{coordinates:o,visibleArea:c}}function _t(e){var t=e.directions,i=e.coordinates,n=e.positionRestrictions,a=n===void 0?{}:n,r=e.sizeRestrictions,s=e.preserveRatio,l=e.compensate,o=v({},t),c=V(i,o).width,u=V(i,o).height;c<0&&(o.left<0&&o.right<0?(o.left=-(i.width-r.minWidth)/(o.left/o.right),o.right=-(i.width-r.minWidth)/(o.right/o.left)):o.left<0?o.left=-(i.width-r.minWidth):o.right<0&&(o.right=-(i.width-r.minWidth))),u<0&&(o.top<0&&o.bottom<0?(o.top=-(i.height-r.minHeight)/(o.top/o.bottom),o.bottom=-(i.height-r.minHeight)/(o.bottom/o.top)):o.top<0?o.top=-(i.height-r.minHeight):o.bottom<0&&(o.bottom=-(i.height-r.minHeight)));var h=xe(V(i,o),a);l&&(h.left&&h.left>0&&h.right===0?(o.right+=h.left,o.left-=h.left):h.right&&h.right>0&&h.left===0&&(o.left+=h.right,o.right-=h.right),h.top&&h.top>0&&h.bottom===0?(o.bottom+=h.top,o.top-=h.top):h.bottom&&h.bottom>0&&h.top===0&&(o.top+=h.bottom,o.bottom-=h.bottom),h=xe(V(i,o),a));var f={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(Z.forEach(function(p){var b=h[p];b&&o[p]&&(f[p]=Math.max(0,1-b/o[p]))}),s){var g=Math.min.apply(null,Z.map(function(p){return f[p]}));g!==1/0&&Z.forEach(function(p){o[p]*=g})}else Z.forEach(function(p){f[p]!==1/0&&(o[p]*=f[p])});if(c=V(i,o).width,u=V(i,o).height,o.right+o.left&&(c>r.maxWidth?f.width=(r.maxWidth-i.width)/(o.right+o.left):c<r.minWidth&&(f.width=(r.minWidth-i.width)/(o.right+o.left))),o.bottom+o.top&&(u>r.maxHeight?f.height=(r.maxHeight-i.height)/(o.bottom+o.top):u<r.minHeight&&(f.height=(r.minHeight-i.height)/(o.bottom+o.top))),s){var m=Math.min(f.width,f.height);m!==1/0&&Z.forEach(function(p){o[p]*=m})}else f.width!==1/0&&Ui.forEach(function(p){o[p]*=f.width}),f.height!==1/0&&_i.forEach(function(p){o[p]*=f.height});return o}function Me(e,t,i){return t==0&&i==0?e/2:t==0?0:i==0?e:e*Math.abs(t/(t+i))}var rn=N("vue-simple-handler"),an=N("vue-simple-handler-wrapper"),ut={name:"SimpleHandler",components:{HandlerWrapper:oi},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var e,t=(_(e={},this.horizontalPosition,!!this.horizontalPosition),_(e,this.verticalPosition,!!this.verticalPosition),_(e,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),!!(this.verticalPosition&&this.horizontalPosition)),_(e,"hover",this.hover),e);return{default:P(rn(t),this.defaultClass,this.hover&&this.hoverClass),wrapper:P(an(t),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};ut.render=function(e,t,i,n,a,r){var s=ee("HandlerWrapper");return w(),E(s,{class:r.classes.wrapper,"vertical-position":i.verticalPosition,"horizontal-position":i.horizontalPosition,disabled:i.disabled,onDrag:r.onDrag,onDragEnd:r.onDragEnd,onEnter:r.onEnter,onLeave:r.onLeave},{default:O(function(){return[A("div",{class:r.classes.default},null,2)]}),_:1},8,["class","vertical-position","horizontal-position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var on=N("vue-simple-line"),sn=N("vue-simple-line-wrapper"),dt={name:"SimpleLine",components:{LineWrapper:si},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:P(on(_({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:P(sn(_({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};dt.render=function(e,t,i,n,a,r){var s=ee("LineWrapper");return w(),E(s,{class:r.classes.wrapper,position:i.position,disabled:i.disabled,onDrag:r.onDrag,onDragEnd:r.onDragEnd,onEnter:r.onEnter,onLeave:r.onLeave},{default:O(function(){return[A("div",{class:r.classes.root},null,2)]}),_:1},8,["class","position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var Ve=N("vue-bounding-box"),ln=["east","west",null],hn=["south","north",null],ui={name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return ut}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return dt}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var e=[];return ln.forEach(function(t){hn.forEach(function(i){if(t!==i){var n=ii(t,i),a=n.name,r=n.classname;e.push({name:a,classname:r,verticalDirection:i,horizontalDirection:t})}})}),{points:e}},computed:{style:function(){var e={};return this.width&&this.height&&(e.width="".concat(this.width,"px"),e.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),e},classes:function(){var e=this.handlersClasses,t=this.handlersWrappersClasses,i=this.linesClasses,n=this.linesWrappersClasses;return{root:Ve(),handlers:e,handlersWrappers:t,lines:i,linesWrappers:n}},lineNodes:function(){var e=this,t=[];return this.points.forEach(function(i){i.horizontalDirection&&i.verticalDirection||!e.lines[i.name]||t.push({name:i.name,component:e.linesComponent,class:P(e.classes.lines.default,e.classes.lines[i.name],!e.resizable&&e.classes.lines.disabled),wrapperClass:P(e.classes.linesWrappers.default,e.classes.linesWrappers[i.name],!e.resizable&&e.classes.linesWrappers.disabled),hoverClass:e.classes.lines.hover,verticalDirection:i.verticalDirection,horizontalDirection:i.horizontalDirection,disabled:!e.resizable})}),t},handlerNodes:function(){var e=this,t=[],i=this.width,n=this.height;return this.points.forEach(function(a){if(e.handlers[a.name]){var r={name:a.name,component:e.handlersComponent,class:P(e.classes.handlers.default,e.classes.handlers[a.name]),wrapperClass:P(e.classes.handlersWrappers.default,e.classes.handlersWrappers[a.name]),hoverClass:e.classes.handlers.hover,verticalDirection:a.verticalDirection,horizontalDirection:a.horizontalDirection,disabled:!e.resizable};if(i&&n){var s=a.horizontalDirection,l=a.verticalDirection,o=s==="east"?i:s==="west"?0:i/2,c=l==="south"?n:l==="north"?0:n/2;r.wrapperClass=Ve("handler"),r.wrapperStyle={transform:"translate(".concat(o,"px, ").concat(c,"px)")},e.transitions&&e.transitions.enabled&&(r.wrapperStyle.transition="".concat(e.transitions.time,"ms ").concat(e.transitions.timingFunction))}else r.wrapperClass=Ve("handler",_({},a.classname,!0));t.push(r)}}),t}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(e,t,i){var n,a=e.shift(),r=a.left,s=a.top,l={left:0,right:0,top:0,bottom:0};t==="west"?l.left-=r:t==="east"&&(l.right+=r),i==="north"?l.top-=s:i==="south"&&(l.bottom+=s),!i&&t?n="width":i&&!t&&(n="height"),this.resizable&&this.$emit("resize",new ji(l,{allowedDirections:{left:t==="west"||!t,right:t==="east"||!t,bottom:i==="south"||!i,top:i==="north"||!i},preserveAspectRatio:e.nativeEvent&&e.nativeEvent.shiftKey,respectDirection:n}))}},emits:["resize","resize-end"]};ui.render=function(e,t,i,n,a,r){return w(),E("div",{ref:"box",class:r.classes.root,style:r.style},[le(e.$slots,"default"),A("div",null,[(w(!0),E(Et,null,Tt(r.lineNodes,function(s){return w(),E(ye(s.component),{key:s.name,"default-class":s.class,"hover-class":s.hoverClass,"wrapper-class":s.wrapperClass,position:s.name,disabled:s.disabled,onDrag:function(l){return r.onHandlerDrag(l,s.horizontalDirection,s.verticalDirection)},onDragEnd:t[1]||(t[1]=function(l){return r.onEnd()})},null,8,["default-class","hover-class","wrapper-class","position","disabled","onDrag"])}),128))]),(w(!0),E(Et,null,Tt(r.handlerNodes,function(s){return w(),E("div",{key:s.name,style:s.wrapperStyle,class:s.wrapperClass},[(w(),E(ye(s.component),{"default-class":s.class,"hover-class":s.hoverClass,"wrapper-class":s.wrapperClass,"horizontal-position":s.horizontalDirection,"vertical-position":s.verticalDirection,disabled:s.disabled,onDrag:function(l){return r.onHandlerDrag(l,s.horizontalDirection,s.verticalDirection)},onDragEnd:t[2]||(t[2]=function(l){return r.onEnd()})},null,8,["default-class","hover-class","wrapper-class","horizontal-position","vertical-position","disabled","onDrag"]))],6)}),128))],6)};var cn=N("vue-draggable-area"),di={name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:cn()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(e){if(e.cancelable){var t=this.movable&&e.touches.length===1;t&&(this.touches=se(e.touches)),(this.touchStarted||t)&&(e.preventDefault(),e.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(e){this.touches.length>=1&&(this.touchStarted?(this.processMove(e,e.touches),e.preventDefault(),e.stopPropagation()):ai({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:e.touches[0].clientX,y:e.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(e){if(this.movable&&e.button===0){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.cancelable&&e.preventDefault(),e.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.container.getBoundingClientRect(),i=t.left,n=t.top;this.anchor={x:e.clientX-i,y:e.clientY-n}},processMove:function(e,t){var i=se(t);if(this.touches.length){var n=this.$refs.container.getBoundingClientRect(),a=n.left,r=n.top;this.touches.length===1&&i.length===1&&this.$emit("move",new ht({left:i[0].clientX-(a+this.anchor.x),top:i[0].clientY-(r+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}},emits:["move","move-end"]};di.render=function(e,t,i,n,a,r){return w(),E("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return r.onTouchStart&&r.onTouchStart.apply(r,arguments)}),onMousedown:t[2]||(t[2]=function(){return r.onMouseDown&&r.onMouseDown.apply(r,arguments)})},[le(e.$slots,"default")],544)};function Ze(e){var t,i;return{rotate:e.rotate||0,flip:{horizontal:((t=e==null?void 0:e.flip)===null||t===void 0?void 0:t.horizontal)||!1,vertical:((i=e==null?void 0:e.flip)===null||i===void 0?void 0:i.vertical)||!1}}}function un(e){return new Promise(function(t,i){try{if(e)if(/^data:/i.test(e))t(function(o){o=o.replace(/^data:([^;]+);base64,/gim,"");for(var c=atob(o),u=c.length,h=new ArrayBuffer(u),f=new Uint8Array(h),g=0;g<u;g++)f[g]=c.charCodeAt(g);return h}(e));else if(/^blob:/i.test(e)){var n=new FileReader;n.onload=function(o){t(o.target.result)},r=e,s=function(o){n.readAsArrayBuffer(o)},(l=new XMLHttpRequest).open("GET",r,!0),l.responseType="blob",l.onload=function(){this.status!=200&&this.status!==0||s(this.response)},l.send()}else{var a=new XMLHttpRequest;a.onreadystatechange=function(){a.readyState===4&&(a.status===200||a.status===0?t(a.response):i("Warning: could not load an image to parse its orientation"),a=null)},a.onprogress=function(){a.getResponseHeader("content-type")!=="image/jpeg"&&a.abort()},a.withCredentials=!1,a.open("GET",e,!0),a.responseType="arraybuffer",a.send(null)}else i("Error: the image is empty")}catch(o){i(o)}var r,s,l})}function fi(e){var t=e.rotate,i=e.flip,n=e.scaleX,a=e.scaleY,r="";return r+=" rotate("+t+"deg) ",r+=" scaleX("+n*(i.horizontal?-1:1)+") ",r+=" scaleY("+a*(i.vertical?-1:1)+") "}function dn(e){try{var t,i=new DataView(e),n=void 0,a=void 0,r=void 0,s=void 0;if(i.getUint8(0)===255&&i.getUint8(1)===216)for(var l=i.byteLength,o=2;o+1<l;){if(i.getUint8(o)===255&&i.getUint8(o+1)===225){r=o;break}o++}if(r&&(n=r+10,function(g,m,p){var b,T="";for(b=m,p+=m;b<p;b++)T+=String.fromCharCode(g.getUint8(b));return T}(i,r+4,4)==="Exif")){var c=i.getUint16(n);if(((a=c===18761)||c===19789)&&i.getUint16(n+2,a)===42){var u=i.getUint32(n+4,a);u>=8&&(s=n+u)}}if(s){for(var h=i.getUint16(s,a),f=0;f<h;f++)if(o=s+12*f+2,i.getUint16(o,a)===274){o+=8,t=i.getUint16(o,a),i.setUint16(o,1,a);break}}return t}catch{return null}}function Ft(e,t){var i=t.getBoundingClientRect(),n=i.left,a=i.top,r={left:0,top:0},s=0;return e.forEach(function(l){r.left+=(l.clientX-n)/e.length,r.top+=(l.clientY-a)/e.length}),e.forEach(function(l){s+=ai({x:r.left,y:r.top},{x:l.clientX-n,y:l.clientY-a})}),{centerMass:r,spread:s,count:e.length}}var gi={props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0},eventsFilter:{type:Function,required:!1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},created:function(){this.transforming=!1,this.debouncedProcessEnd=Qe(this.processEnd),this.touches=[]},methods:{processMove:function(e,t){if(this.touches.length){if(this.touches.length===1&&t.length===1)this.$emit("move",new we({left:this.touches[0].clientX-t[0].clientX,top:this.touches[0].clientY-t[0].clientY}));else if(this.touches.length>1&&this.touchResize){var i=Ft(t,this.$refs.container),n=this.oldGeometricProperties;n.count===i.count&&n.count>1&&this.$emit("resize",new we({left:n.centerMass.left-i.centerMass.left,top:n.centerMass.top-i.centerMass.top},{factor:n.spread/i.spread,center:i.centerMass})),this.oldGeometricProperties=i}this.touches=t}},processEnd:function(){this.transforming&&(this.transforming=!1,this.$emit("transform-end"))},processStart:function(){this.transforming=!0,this.debouncedProcessEnd.clear()},processEvent:function(e){return this.eventsFilter?this.eventsFilter(e,this.transforming)!==!1:(e.preventDefault(),e.stopPropagation(),!0)},onTouchStart:function(e){if(e.cancelable&&(this.touchMove||this.touchResize&&e.touches.length>1)&&this.processEvent(e)){var t=this.$refs.container,i=t.getBoundingClientRect(),n=i.left,a=i.top,r=i.bottom,s=i.right;this.touches=se(e.touches).filter(function(l){return l.clientX>n&&l.clientX<s&&l.clientY>a&&l.clientY<r}),this.oldGeometricProperties=Ft(this.touches,t)}},onTouchEnd:function(e){e.touches.length===0&&(this.touches=[],this.processEnd())},onTouchMove:function(e){var t=this;if(this.touches.length){var i=se(e.touches).filter(function(n){return!n.identifier||t.touches.find(function(a){return a.identifier===n.identifier})});this.processEvent(e)&&(this.processMove(e,i),this.processStart())}},onMouseDown:function(e){if(this.mouseMove&&"buttons"in e&&e.buttons===1&&this.processEvent(e)){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.processStart()}},onMouseMove:function(e){this.touches.length&&this.processEvent(e)&&this.processMove(e,[{clientX:e.clientX,clientY:e.clientY}])},onMouseUp:function(){this.touches=[],this.processEnd()},onWheel:function(e){if(this.wheelResize&&this.processEvent(e)){var t=this.$refs.container.getBoundingClientRect(),i=t.left,n=t.top,a=1+this.wheelResize.ratio*(s=e.deltaY||e.detail||e.wheelDelta,(l=+s)==0||ri(l)?l:l>0?1:-1),r={left:e.clientX-i,top:e.clientY-n};this.$emit("resize",new we({},{factor:a,center:r})),this.touches.length||this.debouncedProcessEnd()}var s,l}},emits:["resize","move","transform-end"]};gi.render=function(e,t,i,n,a,r){return w(),E("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return r.onTouchStart&&r.onTouchStart.apply(r,arguments)}),onMousedown:t[2]||(t[2]=function(){return r.onMouseDown&&r.onMouseDown.apply(r,arguments)}),onWheel:t[3]||(t[3]=function(){return r.onWheel&&r.onWheel.apply(r,arguments)})},[le(e.$slots,"default")],544)};var nt={components:{TransformableImage:gi},props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}},emits:["resize","move"]};nt.render=function(e,t,i,n,a,r){var s=ee("transformable-image");return w(),E(s,{"touch-move":i.touchMove,"touch-resize":i.touchResize,"mouse-move":i.mouseMove,"wheel-resize":i.wheelResize,onMove:t[1]||(t[1]=function(l){return e.$emit("move",l)}),onResize:t[2]||(t[2]=function(l){return e.$emit("resize",l)})},{default:O(function(){return[le(e.$slots,"default")]}),_:3},8,["touch-move","touch-resize","mouse-move","wheel-resize"])};var ke=N("vue-preview"),mi={props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:ke({fill:this.fill}),wrapper:ke("wrapper"),imageWrapper:ke("image-wrapper"),image:P(ke("image"),this.imageClass)}},style:function(){if(this.fill)return{};var e={};return this.width&&(e.width="".concat(this.size.width,"px")),this.height&&(e.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},wrapperStyle:function(){var e={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},imageStyle:function(){if(this.coordinates&&this.image){var e=this.coordinates.width/this.size.width,t=y(y({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/e,scaleY:1/e}),i=this.imageSize.width,n=this.imageSize.height,a=hi({width:i,height:n},t.rotate),r={width:"".concat(i,"px"),height:"".concat(n,"px"),left:"0px",top:"0px"},s={rotate:{left:(i-a.width)*t.scaleX/2,top:(n-a.height)*t.scaleY/2},scale:{left:(1-t.scaleX)*i/2,top:(1-t.scaleY)*n/2}};return r.transform=`translate(
				`.concat(-this.coordinates.left/e-s.rotate.left-s.scale.left,"px,").concat(-this.coordinates.top/e-s.rotate.top-s.scale.top,"px) ")+fi(t),this.transitions&&this.transitions.enabled&&(r.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),r}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(e){(e.width||e.height)&&this.onChangeImage()}},mounted:function(){var e=this;this.onChangeImage(),this.$refs.image.addEventListener("load",function(){e.refreshImage()}),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var e=this.$refs.image;this.calculatedImageSize.height=e.naturalHeight,this.calculatedImageSize.width=e.naturalWidth},refresh:function(){var e=this.$refs.root;this.width||(this.calculatedSize.width=e.clientWidth),this.height||(this.calculatedSize.height=e.clientHeight)},onChangeImage:function(){var e=this.$refs.image;e&&e.complete&&this.refreshImage(),this.refresh()}}};mi.render=function(e,t,i,n,a,r){return w(),E("div",{ref:"root",class:r.classes.root,style:r.style},[A("div",{ref:"wrapper",class:r.classes.wrapper,style:r.wrapperStyle},[q(A("img",{ref:"image",src:i.image&&i.image.src,class:r.classes.image,style:r.imageStyle},null,14,["src"]),[[Gt,i.image&&i.image.src]])],6)],6)};var pi={components:{Preview:mi},inheritAttrs:!1};pi.render=function(e,t,i,n,a,r){var s=ee("preview");return w(),E(s,Jt(e.$attrs,{fill:!0}),null,16)};var qe=N("vue-rectangle-stencil"),vi={name:"RectangleStencil",components:{StencilPreview:pi,BoundingBox:ui,DraggableArea:di},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return ut}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return dt}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:P(qe({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:P(qe("preview"),this.previewClass),boundingBox:P(qe("bounding-box"),this.boundingBoxClass)}},style:function(){var e=this.stencilCoordinates,t=e.height,i=e.width,n=e.left,a=e.top,r={width:"".concat(i,"px"),height:"".concat(t,"px"),transform:"translate(".concat(n,"px, ").concat(a,"px)")};return this.transitions&&this.transitions.enabled&&(r.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),r}},methods:{onMove:function(e){this.$emit("move",e),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(e){this.$emit("resize",e),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}},emits:["resize","resize-end","move","move-end"]};vi.render=function(e,t,i,n,a,r){var s=ee("stencil-preview"),l=ee("draggable-area"),o=ee("bounding-box");return w(),E("div",{class:r.classes.stencil,style:r.style},[A(o,{width:i.stencilCoordinates.width,height:i.stencilCoordinates.height,transitions:i.transitions,class:r.classes.boundingBox,handlers:i.handlers,"handlers-component":i.handlersComponent,"handlers-classes":i.handlersClasses,"handlers-wrappers-classes":i.handlersWrappersClasses,lines:i.lines,"lines-component":i.linesComponent,"lines-classes":i.linesClasses,"lines-wrappers-classes":i.linesWrappersClasses,resizable:i.resizable,onResize:r.onResize,onResizeEnd:r.onResizeEnd},{default:O(function(){return[A(l,{movable:i.movable,onMove:r.onMove,onMoveEnd:r.onMoveEnd},{default:O(function(){return[A(s,{image:i.image,coordinates:i.coordinates,width:i.stencilCoordinates.width,height:i.stencilCoordinates.height,class:r.classes.preview,transitions:i.transitions},null,8,["image","coordinates","width","height","class","transitions"])]}),_:1},8,["movable","onMove","onMoveEnd"])]}),_:1},8,["width","height","transitions","class","handlers","handlers-component","handlers-classes","handlers-wrappers-classes","lines","lines-component","lines-classes","lines-wrappers-classes","resizable","onResize","onResizeEnd"])],6)};var fn=["transitions"],K=N("vue-advanced-cropper"),bi={name:"Cropper",components:{BackgroundWrapper:nt},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return vi}},backgroundWrapperComponent:{type:[Object,String],default:function(){return nt}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(e){return Ni.indexOf(e)!==-1}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object]},defaultVisibleArea:{type:[Function,Object]},defaultTransforms:{type:[Function,Object]},defaultBoundaries:{type:[Function,String],validator:function(e){return!(typeof e=="string"&&e!=="fill"&&e!=="fit")}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(e){var t=e.event,i=e.coordinates,n=e.aspectRatio,a=e.positionRestrictions,r=e.sizeRestrictions,s=v(v({},i),{right:i.left+i.width,bottom:i.top+i.height}),l=t.params||{},o=v({},t.directions),c=l.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};r.widthFrozen&&(o.left=0,o.right=0),r.heightFrozen&&(o.top=0,o.bottom=0),Z.forEach(function(k){c[k]||(o[k]=0)});var u=V(s,o=_t({coordinates:s,directions:o,sizeRestrictions:r,positionRestrictions:a})).width,h=V(s,o).height,f=l.preserveRatio?x(s):Ye(u/h,n);if(f){var g=l.respectDirection;if(g||(g=s.width>=s.height||f===1?"width":"height"),g==="width"){var m=u/f-s.height;if(c.top&&c.bottom){var p=o.top,b=o.bottom;o.bottom=Me(m,b,p),o.top=Me(m,p,b)}else c.bottom?o.bottom=m:c.top?o.top=m:c.right?o.right=0:c.left&&(o.left=0)}else if(g==="height"){var T=s.width-h*f;if(c.left&&c.right){var L=o.left,W=o.right;o.left=-Me(T,L,W),o.right=-Me(T,W,L)}else c.left?o.left=-T:c.right?o.right=-T:c.top?o.top=0:c.bottom&&(o.bottom=0)}o=_t({directions:o,coordinates:s,sizeRestrictions:r,positionRestrictions:a,preserveRatio:!0,compensate:l.compensate})}return u=V(s,o).width,h=V(s,o).height,(f=l.preserveRatio?x(s):Ye(u/h,n))&&Math.abs(f-u/h)>.001&&Z.forEach(function(k){c[k]||(o[k]=0)}),it({event:new ht({left:-o.left,top:-o.top}),coordinates:{width:i.width+o.right+o.left,height:i.height+o.top+o.bottom,left:i.left,top:i.top},positionRestrictions:a})}},moveAlgorithm:{type:Function,default:it},initStretcher:{type:Function,default:function(e){var t=e.stretcher,i=e.imageSize,n=x(i);t.style.width=i.width+"px",t.style.height=t.clientWidth/n+"px",t.style.width=t.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(e){var t=e.visibleArea,i=e.coordinates,n=e.aspectRatio,a=e.sizeRestrictions,r=e.positionRestrictions,s=v(v({},i),Q({width:i.width,height:i.height,aspectRatio:n,sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minHeight:Math.min(t.height,a.minHeight),minWidth:Math.min(t.width,a.minWidth)}}));return s=H(s=U(s,de(j(i),j(s))),Oe(G(t),r))}},fitVisibleArea:{type:Function,default:function(e){var t=e.visibleArea,i=e.boundaries,n=e.getAreaRestrictions,a=e.coordinates,r=v({},t);r.height=r.width/x(i),r.top+=(t.height-r.height)/2,(a.height-r.height>0||a.width-r.width>0)&&(r=F(r,Math.max(a.height/r.height,a.width/r.width)));var s=We(ge(a,G(r=F(r,De(r,n({visibleArea:r,type:"resize"}))))));return r.width<a.width&&(s.left=0),r.height<a.height&&(s.top=0),r=H(r=U(r,s),n({visibleArea:r,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.visibleArea,i=e.boundaries,n=e.imageSize,a=e.imageRestriction,r=e.type,s={};return a==="fill-area"?s={left:0,top:0,right:n.width,bottom:n.height}:a==="fit-area"&&(x(i)>x(n)?(s={top:0,bottom:n.height},t&&r==="move"&&(t.width>n.width?(s.left=-(t.width-n.width)/2,s.right=n.width-s.left):(s.left=0,s.right=n.width))):(s={left:0,right:n.width},t&&r==="move"&&(t.height>n.height?(s.top=-(t.height-n.height)/2,s.bottom=n.height-s.top):(s.top=0,s.bottom=n.height)))),s}},sizeRestrictionsAlgorithm:{type:Function,default:function(e){return{minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.imageSize,i={};return e.imageRestriction!=="none"&&(i={left:0,top:0,right:t.width,bottom:t.height}),i}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:null,src:null},defaultImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},appliedImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:y({},jt)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.appliedImageTransforms.rotate,flip:{horizontal:this.appliedImageTransforms.flip.horizontal,vertical:this.appliedImageTransforms.flip.vertical},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var e=function(t){return t*Math.PI/180}(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(e))+Math.abs(this.imageAttributes.height*Math.sin(e)),height:Math.abs(this.imageAttributes.width*Math.sin(e))+Math.abs(this.imageAttributes.height*Math.cos(e))}},initialized:function(){return!!(this.visibleArea&&this.imageLoaded)},settings:function(){var e=et(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:et(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:e}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var e=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:D(this.minWidth)?0:Re(this.minWidth),minHeight:D(this.minHeight)?0:Re(this.minHeight),maxWidth:D(this.maxWidth)?1/0:Re(this.maxWidth),maxHeight:D(this.maxHeight)?1/0:Re(this.maxHeight)});if(e=function(n){var a=n.areaRestrictions,r=n.sizeRestrictions,s=n.boundaries,l=n.positionRestrictions,o=v(v({},r),{minWidth:r.minWidth!==void 0?r.minWidth:0,minHeight:r.minHeight!==void 0?r.minHeight:0,maxWidth:r.maxWidth!==void 0?r.maxWidth:1/0,maxHeight:r.maxHeight!==void 0?r.maxHeight:1/0});l.left!==void 0&&l.right!==void 0&&(o.maxWidth=Math.min(o.maxWidth,l.right-l.left)),l.bottom!==void 0&&l.top!==void 0&&(o.maxHeight=Math.min(o.maxHeight,l.bottom-l.top));var c=tt(a),u=li(s,c);return c.width<1/0&&(!o.maxWidth||o.maxWidth>u.width)&&(o.maxWidth=Math.min(o.maxWidth,u.width)),c.height<1/0&&(!o.maxHeight||o.maxHeight>u.height)&&(o.maxHeight=Math.min(o.maxHeight,u.height)),o.minWidth>o.maxWidth&&(o.minWidth=o.maxWidth,o.widthFrozen=!0),o.minHeight>o.maxHeight&&(o.minHeight=o.maxHeight,o.heightFrozen=!0),o}({sizeRestrictions:e,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var t=this.getStencilSize(),i=tt(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));e.maxWidth=Math.min(e.maxWidth,i.width*t.width/this.boundaries.width),e.maxHeight=Math.min(e.maxHeight,i.height*t.height/this.boundaries.height),e.maxWidth<e.minWidth&&(e.minWidth=e.maxWidth),e.maxHeight<e.minHeight&&(e.minHeight=e.maxHeight)}return e}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:K(),image:P(K("image"),this.imageClass),stencil:K("stencil"),boundaries:P(K("boundaries"),this.boundariesClass),stretcher:P(K("stretcher")),background:P(K("background"),this.backgroundClass),foreground:P(K("foreground"),this.foregroundClass),imageWrapper:P(K("image-wrapper")),cropperWrapper:P(K("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var e=this.coordinates,t=e.width,i=e.height,n=e.left,a=e.top;return{width:t/this.coefficient,height:i/this.coefficient,left:(n-this.visibleArea.left)/this.coefficient,top:(a-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var e={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(e.opacity="0"),e},imageStyle:function(){var e=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},t={left:(e.width-this.imageSize.width)/(2*this.coefficient),top:(e.height-this.imageSize.height)/(2*this.coefficient)},i={left:(1-1/this.coefficient)*e.width/2,top:(1-1/this.coefficient)*e.height/2},n=y(y({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/e.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/e.height)}),a={width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-t.left-i.left-this.imageTransforms.translateX,"px, ").concat(-t.top-i.top-this.imageTransforms.translateY,"px)")+fi(n)};return this.transitionsOptions.enabled&&(a.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),a}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var e=this;this.$nextTick(function(){e.resetCoordinates(),e.runAutoZoom("setCoordinates"),e.onChange()})},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(e,t){["aspectRatio","minAspectRatio","maxAspectRatio"].find(function(i){return e[i]!==t[i]})&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=Qe(this.update,this.debounce),this.debouncedDisableTransitions=Qe(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.debouncedUpdate.clear(),this.debouncedDisableTransitions.clear()},methods:{getResult:function(){var e=this.initialized?this.prepareResult(y({},this.coordinates)):this.defaultCoordinates(),t={rotate:this.imageTransforms.rotate%360,flip:y({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var i=this;return{image:this.image,coordinates:e,visibleArea:this.visibleArea?y({},this.visibleArea):null,imageTransforms:t,get canvas(){return i.canvas?i.getCanvas():void 0}}}return{image:this.image,coordinates:e,visibleArea:this.visibleArea?y({},this.visibleArea):null,canvas:void 0,imageTransforms:t}},zoom:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=i.transitions,a=n===void 0||n;this.onManipulateImage(new we({},{factor:1/e,center:t}),{normalize:!1,transitions:a})},move:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=i.transitions,a=n===void 0||n;this.onManipulateImage(new we({left:e||0,top:t||0}),{normalize:!1,transitions:a})},setCoordinates:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=i.autoZoom,a=n===void 0||n,r=i.transitions,s=r===void 0||r;this.$nextTick(function(){t.imageLoaded?(t.transitionsActive||(s&&t.enableTransitions(),t.coordinates=t.applyTransform(e),a&&t.runAutoZoom("setCoordinates"),s&&t.debouncedDisableTransitions()),t.onChange()):t.delayedTransforms=e})},refresh:function(){var e=this,t=this.$refs.image;if(this.src&&t)return this.initialized?this.updateVisibleArea().then(function(){e.onChange()}):this.resetVisibleArea().then(function(){e.onChange()})},reset:function(){var e=this;return this.resetVisibleArea().then(function(){e.onChange(!1)})},awaitRender:function(e){var t=this;this.awaiting||(this.awaiting=!0,this.$nextTick(function(){e(),t.awaiting=!1}))},prepareResult:function(e){return this.roundResult?function(t){var i=t.coordinates,n=t.sizeRestrictions,a=t.positionRestrictions,r={width:Math.round(i.width),height:Math.round(i.height),left:Math.round(i.left),top:Math.round(i.top)};return r.width>n.maxWidth?r.width=Math.floor(i.width):r.width<n.minWidth&&(r.width=Math.ceil(i.width)),r.height>n.maxHeight?r.height=Math.floor(i.height):r.height<n.minHeight&&(r.height=Math.ceil(i.height)),H(r,a)}(y(y({},this.getPublicProperties()),{},{positionRestrictions:Ce(this.positionRestrictions,this.visibleArea),coordinates:e})):e},processAutoZoom:function(e,t,i,n){var a=this.autoZoomAlgorithm;a||(a=this.stencilSize?Vi:this.autoZoom?Zi:qi);var r=a({event:{type:e,params:n},visibleArea:t,coordinates:i,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return y(y({},r),{},{changed:!Ht(r.visibleArea,t)||!Ht(r.coordinates,i)})},runAutoZoom:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.transitions,n=i!==void 0&&i,a=Oi(t,fn),r=this.processAutoZoom(e,this.visibleArea,this.coordinates,a),s=r.visibleArea,l=r.coordinates,o=r.changed;n&&o&&this.enableTransitions(),this.visibleArea=s,this.coordinates=l,n&&o&&this.debouncedDisableTransitions()},normalizeEvent:function(e){return function(t){var i=t.event,n=t.visibleArea,a=t.coefficient;if(i.type==="manipulateImage")return v(v({},i),{move:{left:i.move&&i.move.left?a*i.move.left:0,top:i.move&&i.move.top?a*i.move.top:0},scale:{factor:i.scale&&i.scale.factor?i.scale.factor:1,center:i.scale&&i.scale.center?{left:i.scale.center.left*a+n.left,top:i.scale.center.top*a+n.top}:null}});if(i.type==="resize"){var r=v(v({},i),{directions:v({},i.directions)});return Z.forEach(function(l){r.directions[l]*=a}),r}if(i.type==="move"){var s=v(v({},i),{directions:v({},i.directions)});return Fi.forEach(function(l){s.directions[l]*=a}),s}return i}(y(y({},this.getPublicProperties()),{},{event:e}))},getCanvas:function(){if(this.$refs.canvas){var e=this.$refs.canvas,t=this.$refs.image,i=this.imageTransforms.rotate!==0||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?function(l,o,c){var u=c.rotate,h=c.flip,f={width:o.naturalWidth,height:o.naturalHeight},g=hi(f,u),m=l.getContext("2d");l.height=g.height,l.width=g.width,m.save();var p=te(j(v({left:0,top:0},f)),u);return m.translate(-(p.left-g.width/2),-(p.top-g.height/2)),m.rotate(u*Math.PI/180),m.translate(h.horizontal?f.width:0,h.vertical?f.height:0),m.scale(h.horizontal?-1:1,h.vertical?-1:1),m.drawImage(o,0,0,f.width,f.height),m.restore(),l}(this.$refs.sourceCanvas,t,this.imageTransforms):t,n=y({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},this.canvas),a=function(l){return l.find(function(o){return c=o,!Number.isNaN(parseFloat(c))&&isFinite(c);var c})},r=Q({sizeRestrictions:{minWidth:a([n.width,n.minWidth])||0,minHeight:a([n.height,n.minHeight])||0,maxWidth:a([n.width,n.maxWidth])||1/0,maxHeight:a([n.height,n.maxHeight])||1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(n.maxArea&&r.width*r.height>n.maxArea){var s=Math.sqrt(n.maxArea/(r.width*r.height));r={width:Math.round(s*r.width),height:Math.round(s*r.height)}}return function(l,o,c,u,h){l.width=u?u.width:c.width,l.height=u?u.height:c.height;var f=l.getContext("2d");f.clearRect(0,0,l.width,l.height),h&&(h.imageSmoothingEnabled&&(f.imageSmoothingEnabled=h.imageSmoothingEnabled),h.imageSmoothingQuality&&(f.imageSmoothingQuality=h.imageSmoothingQuality),h.fillColor&&(f.fillStyle=h.fillColor,f.fillRect(0,0,l.width,l.height),f.save()));var g=c.left<0?-c.left:0,m=c.top<0?-c.top:0;f.drawImage(o,c.left+g,c.top+m,c.width,c.height,g*(l.width/c.width),m*(l.height/c.height),l.width,l.height)}(e,i,this.coordinates,r,n),e}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.visibleArea&&t?Xi(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,n=this.visibleArea&&t?Ce(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return Yi({transform:e,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:i,positionRestrictions:n,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var e=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var t=this.defaultSize;t||(t=this.stencilSize?Ki:Ji);var i=this.sizeRestrictions;i.minWidth,i.minHeight,i.maxWidth,i.maxHeight;var n=ue(t)?t({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):t,a=this.defaultPosition||Gi,r=[n,function(s){var l=s.coordinates;return y({},ue(a)?a({coordinates:l,imageSize:e.imageSize,visibleArea:e.visibleArea}):e.defaultPosition)}];this.delayedTransforms&&r.push.apply(r,se(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(r,!0),this.delayedTransforms=null}},clearImage:function(){var e=this;this.imageLoaded=!1,setTimeout(function(){var t=e.$refs.stretcher;t&&(t.style.height="auto",t.style.width="auto"),e.coordinates=e.defaultCoordinates(),e.boundaries={width:0,height:0}},this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var e=this,t=this.$refs.stretcher,i=this.$refs.cropper;return this.initStretcher({cropper:i,stretcher:t,imageSize:this.imageSize}),this.$nextTick().then(function(){var n={cropper:i,imageSize:e.imageSize};if(ue(e.defaultBoundaries)?e.boundaries=e.defaultBoundaries(n):e.defaultBoundaries==="fit"?e.boundaries=function(a){var r=a.cropper,s=a.imageSize,l=r.clientHeight,o=r.clientWidth,c=l,u=s.width*l/s.height;return u>o&&(u=o,c=s.height*o/s.width),{width:u,height:c}}(n):e.boundaries=function(a){var r=a.cropper;return{width:r.clientWidth,height:r.clientHeight}}(n),!e.boundaries.width||!e.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")})},resetVisibleArea:function(){var e=this;return this.appliedImageTransforms=y(y({},this.defaultImageTransforms),{},{flip:y({},this.defaultImageTransforms.flip)}),this.updateBoundaries().then(function(){e.priority!=="visible-area"&&(e.visibleArea=null,e.resetCoordinates());var t,i,n,a,r,s,l=e.defaultVisibleArea||Qi;e.visibleArea=ue(l)?l({imageSize:e.imageSize,boundaries:e.boundaries,coordinates:e.priority!=="visible-area"?e.coordinates:null,getAreaRestrictions:e.getAreaRestrictions,stencilSize:e.getStencilSize()}):e.defaultVisibleArea,e.visibleArea=(t={visibleArea:e.visibleArea,boundaries:e.boundaries,getAreaRestrictions:e.getAreaRestrictions},i=t.visibleArea,n=t.boundaries,a=t.getAreaRestrictions,r=v({},i),s=x(n),r.width/r.height!==s&&(r.height=r.width/s),H(r,a({visibleArea:r,type:"move"}))),e.priority==="visible-area"?e.resetCoordinates():e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("resetVisibleArea")}).catch(function(){e.visibleArea=null})},updateVisibleArea:function(){var e=this;return this.updateBoundaries().then(function(){e.visibleArea=e.fitVisibleArea({imageSize:e.imageSize,boundaries:e.boundaries,visibleArea:e.visibleArea,coordinates:e.coordinates,getAreaRestrictions:e.getAreaRestrictions}),e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("updateVisibleArea")}).catch(function(){e.visibleArea=null})},onChange:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];e&&this.debounce?this.debouncedUpdate():this.update()},onChangeImage:function(){var e,t=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if(function(a){if(Ot(a))return!1;var r=window.location,s=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(a)||[],l={protocol:s[1]||"",host:s[2]||"",port:s[3]||""},o=function(c){return c.port||((c.protocol||r.protocol)==="http"?80:433)};return!(!l.protocol&&!l.host&&!l.port||l.protocol&&l.protocol==r.protocol&&l.host&&l.host==r.host&&l.host&&o(l)==o(r))}(this.src)){var i=D(this.crossOrigin)?this.canvas:this.crossOrigin;i===!0&&(i="anonymous"),this.imageAttributes.crossOrigin=i||null}if(this.checkOrientation){var n=(e=this.src,new Promise(function(a){un(e).then(function(r){var s=dn(r);a(r?{source:e,arrayBuffer:r,orientation:s}:{source:e,arrayBuffer:null,orientation:null})}).catch(function(r){console.warn(r),a({source:e,arrayBuffer:null,orientation:null})})}));setTimeout(function(){n.then(t.onParseImage)},this.transitionTime)}else setTimeout(function(){t.onParseImage({source:t.src})},this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.imageAttributes.src&&(this.clearImage(),this.$emit("error"))},onSuccessLoadImage:function(){var e=this,t=this.$refs.image;t&&!this.imageLoaded&&(this.imageAttributes.height=t.naturalHeight,this.imageAttributes.width=t.naturalWidth,this.imageLoaded=!0,this.resetVisibleArea().then(function(){e.$emit("ready"),e.onChange(!1)}))},onParseImage:function(e){var t=this,i=e.source,n=e.arrayBuffer,a=e.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,n&&a&&a>1?ni(i)||!Ot(i)?(this.imageAttributes.src=URL.createObjectURL(new Blob([n])),this.imageAttributes.revoke=!0):this.imageAttributes.src=function(r){for(var s=[],l=new Uint8Array(r);l.length>0;){var o=l.subarray(0,8192);s.push(String.fromCharCode.apply(null,Array.from?Array.from(o):o.slice())),l=l.subarray(8192)}return"data:image/jpeg;base64,"+btoa(s.join(""))}(n):this.imageAttributes.src=i,ue(this.defaultTransforms)?this.appliedImageTransforms=Ze(this.defaultTransforms()):Ee(this.defaultTransforms)?this.appliedImageTransforms=Ze(this.defaultTransforms):this.appliedImageTransforms=function(r){var s=Ze({});if(r)switch(r){case 2:s.flip.horizontal=!0;break;case 3:s.rotate=-180;break;case 4:s.flip.vertical=!0;break;case 5:s.rotate=90,s.flip.vertical=!0;break;case 6:s.rotate=90;break;case 7:s.rotate=90,s.flip.horizontal=!0;break;case 8:s.rotate=-90}return s}(a),this.defaultImageTransforms=y(y({},this.appliedImageTransforms),{},{flip:y({},this.appliedImageTransforms.flip)}),this.$nextTick(function(){var r=t.$refs.image;r&&r.complete&&(function(s){return!!s.naturalWidth}(r)?t.onSuccessLoadImage():t.onFailLoadImage())})},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(e){var t=this;this.transitionsOptions.enabled||this.awaitRender(function(){t.coordinates=t.moveAlgorithm(y(y({},t.getPublicProperties()),{},{positionRestrictions:Ce(t.positionRestrictions,t.visibleArea),coordinates:t.coordinates,event:t.normalizeEvent(e)})),t.onChange()})},onResize:function(e){var t=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender(function(){var i=t.sizeRestrictions,n=Math.min(t.coordinates.width,t.coordinates.height,20*t.coefficient);t.coordinates=t.resizeAlgorithm(y(y({},t.getPublicProperties()),{},{positionRestrictions:Ce(t.positionRestrictions,t.visibleArea),sizeRestrictions:{maxWidth:Math.min(i.maxWidth,t.visibleArea.width),maxHeight:Math.min(i.maxHeight,t.visibleArea.height),minWidth:Math.max(i.minWidth,n),minHeight:Math.max(i.minHeight,n)},event:t.normalizeEvent(e)})),t.onChange(),t.ticking=!1})},onManipulateImage:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.transitionsOptions.enabled){var i=t.transitions,n=i!==void 0&&i,a=t.normalize,r=a===void 0||a;n&&this.enableTransitions();var s=en(y(y({},this.getPublicProperties()),{},{event:r?this.normalizeEvent(e):e,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),l=s.visibleArea,o=s.coordinates;this.visibleArea=l,this.coordinates=o,this.runAutoZoom("manipulateImage"),this.onChange(),n&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.visibleArea,i=e.type,n=i===void 0?"move":i;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:t,type:n})},getAspectRatio:function(e){var t,i,n=this.stencilProps,a=n.aspectRatio,r=n.minAspectRatio,s=n.maxAspectRatio;if(this.$refs.stencil&&this.$refs.stencil.aspectRatios){var l=this.$refs.stencil.aspectRatios();t=l.minimum,i=l.maximum}if(D(t)&&(t=D(a)?r:a),D(i)&&(i=D(a)?s:a),!e&&(D(t)||D(i))){var o=this.getStencilSize(),c=o?x(o):null;D(t)&&(t=Bt(c)?c:void 0),D(i)&&(i=Bt(c)?c:void 0)}return{minimum:t,maximum:i}},getStencilSize:function(){if(this.stencilSize)return e={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)},t=e.boundaries,i=e.stencilSize,n=e.aspectRatio,Ye(x(a=ue(i)?i({boundaries:t,aspectRatio:n}):i),n)&&(a=Q({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:a.width,height:a.height,aspectRatio:{minimum:n.minimum,maximum:n.maximum}})),(a.width>t.width||a.height>t.height)&&(a=Q({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:a.width,height:a.height,aspectRatio:{minimum:x(a),maximum:x(a)}})),a;var e,t,i,n,a},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return y({},jt)},flip:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=i.transitions,a=n===void 0||n;if(!this.transitionsActive){a&&this.enableTransitions();var r=y({},this.imageTransforms.flip),s=nn({flip:{horizontal:e?!r.horizontal:r.horizontal,vertical:t?!r.vertical:r.vertical},previousFlip:r,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),l=s.visibleArea,o=s.coordinates;e&&(this.appliedImageTransforms.flip.horizontal=!this.appliedImageTransforms.flip.horizontal),t&&(this.appliedImageTransforms.flip.vertical=!this.appliedImageTransforms.flip.vertical),this.visibleArea=l,this.coordinates=o,this.onChange(),a&&this.debouncedDisableTransitions()}},rotate:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.transitions,n=i===void 0||i;if(!this.transitionsActive){n&&this.enableTransitions();var a=y({},this.imageSize);this.appliedImageTransforms.rotate+=e;var r=tn({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:a,imageSize:this.imageSize,angle:e,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),s=r.visibleArea,l=r.coordinates,o=this.processAutoZoom("rotateImage",s,l);s=o.visibleArea,l=o.coordinates,this.visibleArea=s,this.coordinates=l,this.onChange(),n&&this.debouncedDisableTransitions()}}},emits:["change","error","ready"]},gn={key:0,ref:"canvas",style:{display:"none"}},mn={key:1,ref:"sourceCanvas",style:{display:"none"}};bi.render=function(e,t,i,n,a,r){return w(),E("div",{ref:"cropper",class:r.classes.cropper},[A("div",{ref:"stretcher",class:r.classes.stretcher},null,2),A("div",{class:r.classes.boundaries,style:r.boundariesStyle},[(w(),E(ye(i.backgroundWrapperComponent),{class:r.classes.cropperWrapper,"wheel-resize":r.settings.resizeImage.wheel,"touch-resize":r.settings.resizeImage.touch,"touch-move":r.settings.moveImage.touch,"mouse-move":r.settings.moveImage.mouse,onMove:r.onManipulateImage,onResize:r.onManipulateImage},{default:O(function(){return[A("div",{class:r.classes.background,style:r.boundariesStyle},null,6),A("div",{class:r.classes.imageWrapper},[A("img",{ref:"image",crossorigin:a.imageAttributes.crossOrigin,src:a.imageAttributes.src,class:r.classes.image,style:r.imageStyle,onMousedown:t[1]||(t[1]=Kt(function(){},["prevent"]))},null,46,["crossorigin","src"])],2),A("div",{class:r.classes.foreground,style:r.boundariesStyle},null,6),q((w(),E(ye(i.stencilComponent),Jt({ref:"stencil",image:r.image,coordinates:a.coordinates,"stencil-coordinates":r.stencilCoordinates,transitions:r.transitionsOptions},i.stencilProps,{onResize:r.onResize,onResizeEnd:r.onResizeEnd,onMove:r.onMove,onMoveEnd:r.onMoveEnd}),null,16,["image","coordinates","stencil-coordinates","transitions","onResize","onResizeEnd","onMove","onMoveEnd"])),[[Gt,a.imageLoaded]]),i.canvas?(w(),E("canvas",gn,null,512)):oe("",!0),i.canvas?(w(),E("canvas",mn,null,512)):oe("",!0)]}),_:1},8,["class","wheel-resize","touch-resize","touch-move","mouse-move","onMove","onResize"]))],6)],2)};/*!
 * Compressor.js v1.2.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-02-28T14:09:41.732Z
 */function Nt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),i.push.apply(i,n)}return i}function Se(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Nt(Object(i),!0).forEach(function(n){bn(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Nt(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}function pn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wi(n.key),n)}}function vn(e,t,i){return Xt(e.prototype,t),Xt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function bn(e,t,i){return t=wi(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Le.apply(this,arguments)}function wn(e,t){if(typeof e!="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var n=i.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wi(e){var t=wn(e,"string");return typeof t=="symbol"?t:String(t)}var yi={exports:{}};(function(e){typeof window>"u"||function(t){var i=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,n=t.Blob&&function(){try{return!!new Blob}catch{return!1}}(),a=n&&t.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),r=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,s=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,l=(n||r)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(o){var c,u,h,f,g,m,p,b,T;if(c=o.match(s),!c)throw new Error("invalid data URI");for(u=c[2]?c[1]:"text/plain"+(c[3]||";charset=US-ASCII"),h=!!c[4],f=o.slice(c[0].length),h?g=atob(f):g=decodeURIComponent(f),m=new ArrayBuffer(g.length),p=new Uint8Array(m),b=0;b<g.length;b+=1)p[b]=g.charCodeAt(b);return n?new Blob([a?p:m],{type:u}):(T=new r,T.append(m),T.getBlob(u))};t.HTMLCanvasElement&&!i.toBlob&&(i.mozGetAsFile?i.toBlob=function(o,c,u){var h=this;setTimeout(function(){u&&i.toDataURL&&l?o(l(h.toDataURL(c,u))):o(h.mozGetAsFile("blob",c))})}:i.toDataURL&&l&&(i.msToBlob?i.toBlob=function(o,c,u){var h=this;setTimeout(function(){(c&&c!=="image/png"||u)&&i.toDataURL&&l?o(l(h.toDataURL(c,u))):o(h.msToBlob(c))})}:i.toBlob=function(o,c,u){var h=this;setTimeout(function(){o(l(h.toDataURL(c,u)))})})),e.exports?e.exports=l:t.dataURLtoBlob=l}(window)})(yi);var Yt=yi.exports,yn=function(t){return typeof Blob>"u"?!1:t instanceof Blob||Object.prototype.toString.call(t)==="[object Blob]"},Vt={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},xn=typeof window<"u"&&typeof window.document<"u",ne=xn?window:{},$e=function(t){return t>0&&t<1/0},An=Array.prototype.slice;function ft(e){return Array.from?Array.from(e):An.call(e)}var zn=/^image\/.+$/;function rt(e){return zn.test(e)}function Rn(e){var t=rt(e)?e.substr(6):"";return t==="jpeg"&&(t="jpg"),".".concat(t)}var xi=String.fromCharCode;function Cn(e,t,i){var n="",a;for(i+=t,a=t;a<i;a+=1)n+=xi(e.getUint8(a));return n}var Mn=ne.btoa;function Zt(e,t){for(var i=[],n=8192,a=new Uint8Array(e);a.length>0;)i.push(xi.apply(null,ft(a.subarray(0,n)))),a=a.subarray(n);return"data:".concat(t,";base64,").concat(Mn(i.join("")))}function kn(e){var t=new DataView(e),i;try{var n,a,r;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var s=t.byteLength,l=2;l+1<s;){if(t.getUint8(l)===255&&t.getUint8(l+1)===225){a=l;break}l+=1}if(a){var o=a+4,c=a+10;if(Cn(t,o,4)==="Exif"){var u=t.getUint16(c);if(n=u===18761,(n||u===19789)&&t.getUint16(c+2,n)===42){var h=t.getUint32(c+4,n);h>=8&&(r=c+h)}}}if(r){var f=t.getUint16(r,n),g,m;for(m=0;m<f;m+=1)if(g=r+m*12+2,t.getUint16(g,n)===274){g+=8,i=t.getUint16(g,n),t.setUint16(g,1,n);break}}}catch{i=1}return i}function Sn(e){var t=0,i=1,n=1;switch(e){case 2:i=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,i=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:i,scaleY:n}}var En=/\.\d*(?:0|9){12}\d*$/;function qt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return En.test(e)?Math.round(e*t)/t:e}function ve(e){var t=e.aspectRatio,i=e.height,n=e.width,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",r=$e(n),s=$e(i);if(r&&s){var l=i*t;(a==="contain"||a==="none")&&l>n||a==="cover"&&l<n?i=n/t:n=i*t}else r?i=n/t:s&&(n=i*t);return{width:n,height:i}}function Tn(e){for(var t=ft(new Uint8Array(e)),i=t.length,n=[],a=0;a+3<i;){var r=t[a],s=t[a+1];if(r===255&&s===218)break;if(r===255&&s===216)a+=2;else{var l=t[a+2]*256+t[a+3],o=a+l+2,c=t.slice(a,o);n.push(c),a=o}}return n.reduce(function(u,h){return h[0]===255&&h[1]===225?u.concat(h):u},[])}function Ln(e,t){var i=ft(new Uint8Array(e));if(i[2]!==255||i[3]!==224)return e;var n=i[4]*256+i[5],a=[255,216].concat(t,i.slice(4+n));return new Uint8Array(a)}var $n=ne.ArrayBuffer,Ge=ne.FileReader,ae=ne.URL||ne.webkitURL,Pn=/\.\w+$/,Wn=ne.Compressor,Dn=function(){function e(t,i){pn(this,e),this.file=t,this.exif=[],this.image=new Image,this.options=Se(Se({},Vt),i),this.aborted=!1,this.result=null,this.init()}return vn(e,[{key:"init",value:function(){var i=this,n=this.file,a=this.options;if(!yn(n)){this.fail(new Error("The first argument must be a File or Blob object."));return}var r=n.type;if(!rt(r)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!ae||!Ge){this.fail(new Error("The current browser does not support image compression."));return}$n||(a.checkOrientation=!1,a.retainExif=!1);var s=r==="image/jpeg",l=s&&a.checkOrientation,o=s&&a.retainExif;if(ae&&!l&&!o)this.load({url:ae.createObjectURL(n)});else{var c=new Ge;this.reader=c,c.onload=function(u){var h=u.target,f=h.result,g={},m=1;l&&(m=kn(f),m>1&&Le(g,Sn(m))),o&&(i.exif=Tn(f)),l||o?!ae||m>1?g.url=Zt(f,r):g.url=ae.createObjectURL(n):g.url=f,i.load(g)},c.onabort=function(){i.fail(new Error("Aborted to read the image with FileReader."))},c.onerror=function(){i.fail(new Error("Failed to read the image with FileReader."))},c.onloadend=function(){i.reader=null},l||o?c.readAsArrayBuffer(n):c.readAsDataURL(n)}}},{key:"load",value:function(i){var n=this,a=this.file,r=this.image;r.onload=function(){n.draw(Se(Se({},i),{},{naturalWidth:r.naturalWidth,naturalHeight:r.naturalHeight}))},r.onabort=function(){n.fail(new Error("Aborted to load the image."))},r.onerror=function(){n.fail(new Error("Failed to load the image."))},ne.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(ne.navigator.userAgent)&&(r.crossOrigin="anonymous"),r.alt=a.name,r.src=i.url}},{key:"draw",value:function(i){var n=this,a=i.naturalWidth,r=i.naturalHeight,s=i.rotate,l=s===void 0?0:s,o=i.scaleX,c=o===void 0?1:o,u=i.scaleY,h=u===void 0?1:u,f=this.file,g=this.image,m=this.options,p=document.createElement("canvas"),b=p.getContext("2d"),T=Math.abs(l)%180===90,L=(m.resize==="contain"||m.resize==="cover")&&$e(m.width)&&$e(m.height),W=Math.max(m.maxWidth,0)||1/0,k=Math.max(m.maxHeight,0)||1/0,X=Math.max(m.minWidth,0)||0,M=Math.max(m.minHeight,0)||0,R=a/r,S=m.width,C=m.height;if(T){var Y=[k,W];W=Y[0],k=Y[1];var J=[M,X];X=J[0],M=J[1];var he=[C,S];S=he[0],C=he[1]}L&&(R=S/C);var re=ve({aspectRatio:R,width:W,height:k},"contain");W=re.width,k=re.height;var Ae=ve({aspectRatio:R,width:X,height:M},"cover");if(X=Ae.width,M=Ae.height,L){var gt=ve({aspectRatio:R,width:S,height:C},m.resize);S=gt.width,C=gt.height}else{var mt=ve({aspectRatio:R,width:S,height:C}),pt=mt.width;S=pt===void 0?a:pt;var vt=mt.height;C=vt===void 0?r:vt}S=Math.floor(qt(Math.min(Math.max(S,X),W))),C=Math.floor(qt(Math.min(Math.max(C,M),k)));var Ai=-S/2,zi=-C/2,Ri=S,Ci=C,Be=[];if(L){var bt=0,wt=0,je=a,He=r,yt=ve({aspectRatio:R,width:a,height:r},{contain:"cover",cover:"contain"}[m.resize]);je=yt.width,He=yt.height,bt=(a-je)/2,wt=(r-He)/2,Be.push(bt,wt,je,He)}if(Be.push(Ai,zi,Ri,Ci),T){var xt=[C,S];S=xt[0],C=xt[1]}p.width=S,p.height=C,rt(m.mimeType)||(m.mimeType=f.type);var At="transparent";f.size>m.convertSize&&m.convertTypes.indexOf(m.mimeType)>=0&&(m.mimeType="image/jpeg");var zt=m.mimeType==="image/jpeg";if(zt&&(At="#fff"),b.fillStyle=At,b.fillRect(0,0,S,C),m.beforeDraw&&m.beforeDraw.call(this,b,p),!this.aborted&&(b.save(),b.translate(S/2,C/2),b.rotate(l*Math.PI/180),b.scale(c,h),b.drawImage.apply(b,[g].concat(Be)),b.restore(),m.drew&&m.drew.call(this,b,p),!this.aborted)){var Rt=function(me){if(!n.aborted){var Ct=function(pe){return n.done({naturalWidth:a,naturalHeight:r,result:pe})};if(me&&zt&&m.retainExif&&n.exif&&n.exif.length>0){var Mt=function(pe){return Ct(Yt(Zt(Ln(pe,n.exif),m.mimeType)))};if(me.arrayBuffer)me.arrayBuffer().then(Mt).catch(function(){n.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var ce=new Ge;n.reader=ce,ce.onload=function(Ie){var pe=Ie.target;Mt(pe.result)},ce.onabort=function(){n.fail(new Error("Aborted to read the compressed image with FileReader."))},ce.onerror=function(){n.fail(new Error("Failed to read the compressed image with FileReader."))},ce.onloadend=function(){n.reader=null},ce.readAsArrayBuffer(me)}}else Ct(me)}};p.toBlob?p.toBlob(Rt,m.mimeType,m.quality):Rt(Yt(p.toDataURL(m.mimeType,m.quality)))}}},{key:"done",value:function(i){var n=i.naturalWidth,a=i.naturalHeight,r=i.result,s=this.file,l=this.image,o=this.options;if(ae&&l.src.indexOf("blob:")===0&&ae.revokeObjectURL(l.src),r)if(o.strict&&!o.retainExif&&r.size>s.size&&o.mimeType===s.type&&!(o.width>n||o.height>a||o.minWidth>n||o.minHeight>a||o.maxWidth<n||o.maxHeight<a))r=s;else{var c=new Date;r.lastModified=c.getTime(),r.lastModifiedDate=c,r.name=s.name,r.name&&r.type!==s.type&&(r.name=r.name.replace(Pn,Rn(r.type)))}else r=s;this.result=r,o.success&&o.success.call(this,r)}},{key:"fail",value:function(i){var n=this.options;if(n.error)n.error.call(this,i);else throw i}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Wn,e}},{key:"setDefaults",value:function(i){Le(Vt,i)}}]),e}();const On={class:"fixed inset-0 overflow-y-auto"},Bn={class:"flex min-h-full items-center justify-center p-4"},jn={class:"px-6 pt-6 pb-4"},Hn={class:"px-6 pb-4 text-center"},In={class:"text-sm text-gray-600 dark:text-gray-400"},Un={class:"px-6 pb-6 flex gap-3"},_n=["disabled"],Fn={key:0,class:"flex items-center justify-center gap-2"},Nn={key:1},Xn=Pe({__name:"ConfirmModal",props:{isOpen:{type:Boolean},title:{},message:{},confirmText:{default:"Confirm"},cancelText:{default:"Cancel"},loadingText:{default:"Processing..."},variant:{default:"danger"},isLoading:{type:Boolean,default:!1}},emits:["confirm","cancel"],setup(e,{emit:t}){const i=e,n=t,a=Je(()=>{switch(i.variant){case"danger":return ei;case"warning":return Di;case"info":return Pt;default:return Pt}}),r=()=>{n("confirm")},s=()=>{n("cancel")};return(l,o)=>(w(),E(z($i),{show:l.isOpen,as:"template"},{default:O(()=>[A(z(Ei),{as:"div",class:"relative z-50",onClose:s},{default:O(()=>[A(z(Lt),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:O(()=>o[0]||(o[0]=[d("div",{class:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity"},null,-1)])),_:1}),d("div",On,[d("div",Bn,[A(z(Lt),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:O(()=>[A(z(Ti),{class:"w-full max-w-md overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-2xl transform transition-all border border-gray-200 dark:border-gray-700"},{default:O(()=>[d("div",jn,[d("div",{class:Ue(["mx-auto flex h-12 w-12 items-center justify-center rounded-full",l.variant==="danger"?"bg-red-100 dark:bg-red-900/20":l.variant==="warning"?"bg-orange-100 dark:bg-orange-900/20":"bg-blue-100 dark:bg-blue-900/20"])},[(w(),E(ye(a.value),{class:Ue(["h-6 w-6",l.variant==="danger"?"text-red-600 dark:text-red-400":l.variant==="warning"?"text-orange-600 dark:text-orange-400":"text-blue-600 dark:text-blue-400"])},null,8,["class"]))],2)]),d("div",Hn,[A(z(Li),{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},{default:O(()=>[Te($(l.title),1)]),_:1}),d("p",In,$(l.message),1)]),d("div",Un,[d("button",{onClick:s,type:"button",class:"flex-1 rounded-lg bg-gray-100 px-4 py-2.5 text-gray-900 font-medium hover:bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600 transition-all focus:outline-none focus:ring-2 focus:ring-gray-400 dark:focus:ring-gray-500"},$(l.cancelText),1),d("button",{onClick:r,type:"button",disabled:l.isLoading,class:Ue(["flex-1 rounded-lg px-4 py-2.5 text-white font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",l.variant==="danger"?"bg-red-600 hover:bg-red-700 focus:ring-red-500":l.variant==="warning"?"bg-orange-600 hover:bg-orange-700 focus:ring-orange-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"])},[l.isLoading?(w(),I("span",Fn,[o[1]||(o[1]=d("svg",{class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),Te(" "+$(l.loadingText),1)])):(w(),I("span",Nn,$(l.confirmText),1))],10,_n)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}}),Yn={class:"avatar-uploader"},Vn={class:"avatar-container"},Zn={key:0,class:"avatar-preview"},qn=["src"],Gn={class:"avatar-overlay"},Jn={class:"avatar-initials"},Kn={class:"avatar-placeholder-overlay"},Qn={class:"modal-container"},er={class:"modal-header"},tr={class:"modal-body"},ir={class:"cropper-wrapper"},nr={class:"modal-footer"},rr=["disabled"],ar={__name:"AvatarUploader",props:{currentAvatar:{type:String,default:null},userName:{type:String,default:null}},emits:["avatar-updated","avatar-removed"],setup(e,{emit:t}){const i=e,n=t,a=ot(),r=B(null),s=B(null),l=B(null),o=B(!1),c=B(!1),u=B(null),h=B(!1),f=B(!1),g=Je(()=>be.getCurrentUser()),m=Je(()=>{var M;return i.userName||((M=g.value)==null?void 0:M.name)||null}),p=()=>{const M=m.value;if(!M||!M.trim())return"U";const R=M.trim().split(/\s+/);if(R.length===0)return"U";if(R.length===1)return R[0].substring(0,2).toUpperCase();const S=R[0],C=R[R.length-1];return(S.charAt(0)+C.charAt(0)).toUpperCase()},b=()=>{var M;(M=r.value)==null||M.click()},T=M=>{var Y;const R=(Y=M.target.files)==null?void 0:Y[0];if(!R)return;if(R.size>5*1024*1024){a.error("File size must be less than 5MB");return}if(!["image/jpeg","image/png","image/jpg","image/webp","image/gif"].includes(R.type)){a.error("Invalid file type. Only JPEG, PNG, WebP, and GIF are allowed");return}const C=new FileReader;C.onload=J=>{s.value=J.target.result,o.value=!0},C.readAsDataURL(R),M.target.value=""},L=()=>{o.value=!1,s.value=null},W=async()=>{if(u.value){h.value=!0;try{const{canvas:M}=u.value.getResult();M.toBlob(async R=>{new Dn(R,{quality:.8,maxWidth:800,maxHeight:800,success:async S=>{try{const C=new FormData;C.append("avatar",S,"avatar.jpg");const Y=localStorage.getItem("accessToken");if(!Y)throw new Error("Not authenticated. Please log in again.");const J=await fetch("/api/users/me/avatar",{method:"PUT",headers:{Authorization:`Bearer ${Y}`},body:C}),he=await J.text();let re;try{re=he?JSON.parse(he):{}}catch(Ae){throw console.error("JSON parse error. Response text:",he),console.error("Parse error:",Ae),new Error("Invalid server response. Please try again.")}if(!J.ok)throw J.status===401?new Error("Session expired. Please log in again."):new Error(re.message||`Error: ${J.status}`);l.value=re.data.user.avatar,await be.getMe(),a.success("Avatar uploaded successfully"),n("avatar-updated",re.data.user.avatar),L()}catch(C){console.error("Upload error:",C),a.error(C.message||"Error uploading avatar")}finally{h.value=!1}},error:S=>{console.error("Compression error:",S),a.error("Error compressing image"),h.value=!1}})},"image/jpeg",.9)}catch(M){console.error("Crop error:",M),a.error("Error cropping image"),h.value=!1}}},k=()=>{c.value=!0},X=async()=>{f.value=!0;try{const M=localStorage.getItem("accessToken");if(!M)throw new Error("Not authenticated. Please log in again.");const R=await fetch("/api/users/me/avatar",{method:"DELETE",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"}}),S=await R.text();let C;try{C=S?JSON.parse(S):{}}catch(Y){throw console.error("JSON parse error. Response text:",S),console.error("Parse error:",Y),new Error("Invalid server response. Please try again.")}if(!R.ok)throw R.status===401?new Error("Session expired. Please log in again."):new Error(C.message||`Error: ${R.status}`);l.value=null,await be.getMe(),c.value=!1,a.success("Profile photo removed successfully"),n("avatar-removed")}catch(M){console.error("Remove error:",M),a.error(M.message||"Error removing avatar")}finally{f.value=!1}};return(M,R)=>(w(),I("div",Yn,[d("div",Vn,[l.value||e.currentAvatar?(w(),I("div",Zn,[d("img",{src:l.value||e.currentAvatar,alt:"Avatar",class:"avatar-image"},null,8,qn),d("div",Gn,[d("button",{onClick:b,class:"overlay-btn",type:"button",title:"Change photo"},[A(z($t),{size:20})]),d("button",{onClick:k,class:"overlay-btn",type:"button",title:"Remove photo"},[A(z(ei),{size:20})])])])):(w(),I("div",{key:1,class:"avatar-placeholder",onClick:b},[d("div",Jn,$(p()),1),d("div",Kn,[A(z($t),{size:20})])]))]),d("input",{ref_key:"fileInput",ref:r,type:"file",accept:"image/jpeg,image/png,image/jpg,image/webp,image/gif",onChange:T,class:"hidden-input"},null,544),A(Xn,{"is-open":c.value,title:"Remove Profile Photo",message:"Are you sure you want to remove your profile photo? This action cannot be undone.","confirm-text":"Remove Photo","cancel-text":"Cancel","loading-text":"Removing...",variant:"danger","is-loading":f.value,onConfirm:X,onCancel:R[0]||(R[0]=S=>c.value=!1)},null,8,["is-open","is-loading"]),A(Si,{name:"modal"},{default:O(()=>[o.value?(w(),I("div",{key:0,class:"modal-overlay",onClick:Kt(L,["self"])},[d("div",Qn,[d("div",er,[R[1]||(R[1]=d("h3",null,"Crop your photo",-1)),d("button",{onClick:L,class:"close-btn",type:"button"},[A(z(Wi),{size:20})])]),d("div",tr,[d("div",ir,[A(z(bi),{ref_key:"cropper",ref:u,src:s.value,"stencil-props":{aspectRatio:1},class:"cropper","image-restriction":"stencil"},null,8,["src"])])]),d("div",nr,[d("button",{onClick:L,class:"btn btn-secondary",type:"button"}," Cancel "),d("button",{onClick:W,class:"btn btn-primary",type:"button",disabled:h.value},$(h.value?"Uploading...":"Upload Photo"),9,rr)])])])):oe("",!0)]),_:1})]))}},or=Pi(ar,[["__scopeId","data-v-0b1643db"]]),sr={class:"p-5 mb-6 border border-gray-200 rounded-2xl dark:border-gray-800 lg:p-6"},lr={class:"flex flex-col gap-5 xl:flex-row xl:items-center xl:justify-between"},hr={class:"flex flex-col items-center w-full gap-6 xl:flex-row"},cr={class:"text-center xl:text-left"},ur={class:"mb-2 text-lg font-semibold text-gray-800 dark:text-white/90"},dr={class:"flex flex-col items-center gap-1 xl:flex-row xl:gap-2"},fr={class:"text-sm text-gray-500 dark:text-gray-400"},gr={key:0,class:"hidden xl:inline text-gray-400"},mr={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},pr=Pe({__name:"ProfileCard",setup(e){const{userProfile:t,loadProfile:i}=lt();st(async()=>{await i()});const n=async s=>{await i()},a=async()=>{await i()},r=s=>{if(!s)return"No location";const l=[];return s.city&&l.push(s.city),s.country&&l.push(s.country),l.length>0?l.join(", "):"No location"};return(s,l)=>{var o,c,u,h,f,g,m,p,b,T,L,W,k,X;return w(),I("div",null,[d("div",sr,[d("div",lr,[d("div",hr,[A(or,{"current-avatar":((o=z(t))==null?void 0:o.avatar)||null,"user-name":((c=z(t))==null?void 0:c.name)||null,onAvatarUpdated:n,onAvatarRemoved:a},null,8,["current-avatar","user-name"]),d("div",cr,[d("h4",ur,$(((u=z(t))==null?void 0:u.name)||"Not specified"),1),d("div",dr,[d("p",fr,$(((h=z(t))==null?void 0:h.bio)||"No bio"),1),(f=z(t))!=null&&f.bio&&((m=(g=z(t))==null?void 0:g.address)!=null&&m.city||(b=(p=z(t))==null?void 0:p.address)!=null&&b.country)?(w(),I("span",gr,"|")):oe("",!0),(L=(T=z(t))==null?void 0:T.address)!=null&&L.city||(k=(W=z(t))==null?void 0:W.address)!=null&&k.country?(w(),I("p",mr,$(r((X=z(t))==null?void 0:X.address)),1)):oe("",!0)])])])])])])}}}),vr={class:"p-5 mb-6 border border-gray-200 rounded-2xl dark:border-gray-800 lg:p-6"},br={class:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between"},wr={class:"w-full"},yr={key:0,class:"flex items-center justify-center py-8"},xr={key:1,class:"grid grid-cols-1 gap-4 lg:grid-cols-2 lg:gap-7 2xl:gap-x-32"},Ar={class:"text-sm font-medium text-gray-800 dark:text-white/90"},zr={class:"text-sm font-medium text-gray-800 dark:text-white/90"},Rr={class:"text-sm font-medium text-gray-800 dark:text-white/90"},Cr={class:"text-sm font-medium text-gray-800 dark:text-white/90"},Mr={class:"no-scrollbar relative w-full max-w-[700px] overflow-y-auto rounded-3xl bg-white p-4 dark:bg-gray-900 lg:p-11"},kr={class:"flex flex-col"},Sr={class:"custom-scrollbar overflow-y-auto p-2"},Er={class:"grid grid-cols-1 gap-x-6 gap-y-5 lg:grid-cols-2"},Tr={class:"col-span-2"},Lr={class:"col-span-2 lg:col-span-1"},$r={class:"col-span-2 lg:col-span-1"},Pr={class:"col-span-2"},Wr={class:"flex items-center gap-3 px-2 mt-6 lg:justify-end"},Dr=["disabled"],Or=Pe({__name:"PersonalInfoCard",setup(e){const t=ot(),{userProfile:i,isLoading:n,loadProfile:a,updateProfile:r}=lt(),s=B(!1),l=B(!1),o=B({name:"",email:"",phone:"",bio:""});st(async()=>{if(!i.value)try{await a()}catch(u){t.error(u.message||"Failed to load profile")}}),Qt(i,u=>{u&&(o.value={name:u.name||"",email:u.email||"",phone:u.phone||"",bio:u.bio||""})},{immediate:!0});const c=async()=>{l.value=!0;try{await r(o.value),t.success("Profile updated successfully"),s.value=!1}catch(u){console.error("Error saving profile:",u),t.error(u.message||"Failed to save profile")}finally{l.value=!1}};return(u,h)=>{var f,g,m,p;return w(),I("div",null,[d("div",vr,[d("div",br,[d("div",wr,[h[13]||(h[13]=d("h4",{class:"text-lg font-semibold text-gray-800 dark:text-white/90 mb-6"}," Personal Information ",-1)),z(n)?(w(),I("div",yr,h[8]||(h[8]=[d("svg",{class:"animate-spin h-8 w-8 text-brand-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):(w(),I("div",xr,[d("div",null,[h[9]||(h[9]=d("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"},"Full Name",-1)),d("p",Ar,$(((f=z(i))==null?void 0:f.name)||"Not specified"),1)]),d("div",null,[h[10]||(h[10]=d("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"}," Email ",-1)),d("p",zr,$(((g=z(i))==null?void 0:g.email)||"Not specified"),1)]),d("div",null,[h[11]||(h[11]=d("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"},"Phone",-1)),d("p",Rr,$(((m=z(i))==null?void 0:m.phone)||"Not specified"),1)]),d("div",null,[h[12]||(h[12]=d("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"},"Bio",-1)),d("p",Cr,$(((p=z(i))==null?void 0:p.bio)||"Not specified"),1)])]))]),d("button",{class:"edit-button",onClick:h[0]||(h[0]=b=>s.value=!0)},h[14]||(h[14]=[d("svg",{class:"fill-current",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.0911 2.78206C14.2125 1.90338 12.7878 1.90338 11.9092 2.78206L4.57524 10.116C4.26682 10.4244 4.0547 10.8158 3.96468 11.2426L3.31231 14.3352C3.25997 14.5833 3.33653 14.841 3.51583 15.0203C3.69512 15.1996 3.95286 15.2761 4.20096 15.2238L7.29355 14.5714C7.72031 14.4814 8.11172 14.2693 8.42013 13.9609L15.7541 6.62695C16.6327 5.74827 16.6327 4.32365 15.7541 3.44497L15.0911 2.78206ZM12.9698 3.84272C13.2627 3.54982 13.7376 3.54982 14.0305 3.84272L14.6934 4.50563C14.9863 4.79852 14.9863 5.2734 14.6934 5.56629L14.044 6.21573L12.3204 4.49215L12.9698 3.84272ZM11.2597 5.55281L5.6359 11.1766C5.53309 11.2794 5.46238 11.4099 5.43238 11.5522L5.01758 13.5185L6.98394 13.1037C7.1262 13.0737 7.25666 13.003 7.35947 12.9002L12.9833 7.27639L11.2597 5.55281Z",fill:""})],-1),Te(" Edit ")]))])]),s.value?(w(),E(ti,{key:0,onClose:h[7]||(h[7]=b=>s.value=!1)},{body:O(()=>[d("div",Mr,[d("button",{onClick:h[1]||(h[1]=b=>s.value=!1),class:"transition-color absolute right-5 top-5 z-999 flex h-11 w-11 items-center justify-center rounded-full bg-gray-100 text-gray-400 hover:bg-gray-200 hover:text-gray-600 dark:bg-gray-700 dark:bg-white/[0.05] dark:text-gray-400 dark:hover:bg-white/[0.07] dark:hover:text-gray-300"},h[15]||(h[15]=[d("svg",{class:"fill-current",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.04289 16.5418C5.65237 16.9323 5.65237 17.5655 6.04289 17.956C6.43342 18.3465 7.06658 18.3465 7.45711 17.956L11.9987 13.4144L16.5408 17.9565C16.9313 18.347 17.5645 18.347 17.955 17.9565C18.3455 17.566 18.3455 16.9328 17.955 16.5423L13.4129 12.0002L17.955 7.45808C18.3455 7.06756 18.3455 6.43439 17.955 6.04387C17.5645 5.65335 16.9313 5.65335 16.5408 6.04387L11.9987 10.586L7.45711 6.04439C7.06658 5.65386 6.43342 5.65386 6.04289 6.04439C5.65237 6.43491 5.65237 7.06808 6.04289 7.4586L10.5845 12.0002L6.04289 16.5418Z",fill:""})],-1)])),h[21]||(h[21]=d("div",{class:"px-2 pr-14"},[d("h4",{class:"mb-2 text-2xl font-semibold text-gray-800 dark:text-white/90"}," Edit Personal Information "),d("p",{class:"mb-6 text-sm text-gray-500 dark:text-gray-400 lg:mb-7"}," Update your details to keep your profile up-to-date. ")],-1)),d("form",kr,[d("div",Sr,[d("div",null,[h[20]||(h[20]=d("h5",{class:"mb-5 text-lg font-medium text-gray-800 dark:text-white/90 lg:mb-6"}," Personal Information ",-1)),d("div",Er,[d("div",Tr,[h[16]||(h[16]=d("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Full Name ",-1)),q(d("input",{"onUpdate:modelValue":h[2]||(h[2]=b=>o.value.name=b),type:"text",required:"",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[ie,o.value.name]])]),d("div",Lr,[h[17]||(h[17]=d("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Email ",-1)),q(d("input",{"onUpdate:modelValue":h[3]||(h[3]=b=>o.value.email=b),type:"email",required:"",class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[ie,o.value.email]])]),d("div",$r,[h[18]||(h[18]=d("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Phone ",-1)),q(d("input",{"onUpdate:modelValue":h[4]||(h[4]=b=>o.value.phone=b),type:"text",class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[ie,o.value.phone]])]),d("div",Pr,[h[19]||(h[19]=d("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Bio ",-1)),q(d("input",{"onUpdate:modelValue":h[5]||(h[5]=b=>o.value.bio=b),type:"text",class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[ie,o.value.bio]])])])])]),d("div",Wr,[d("button",{onClick:h[6]||(h[6]=b=>s.value=!1),type:"button",class:"flex w-full justify-center rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03] sm:w-auto"}," Close "),d("button",{onClick:c,type:"button",disabled:l.value,class:"flex w-full justify-center rounded-lg bg-brand-500 px-4 py-2.5 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50 disabled:cursor-not-allowed sm:w-auto"},$(l.value?"Saving...":"Save Changes"),9,Dr)])])])]),_:1})):oe("",!0)])}}}),Br={class:"p-5 border border-gray-200 rounded-2xl dark:border-gray-800 lg:p-6"},jr={class:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between"},Hr={class:"w-full"},Ir={key:0,class:"flex items-center justify-center py-8"},Ur={key:1,class:"grid grid-cols-1 gap-4 lg:grid-cols-2 lg:gap-7 2xl:gap-x-32"},_r={class:"text-sm font-medium text-gray-800 dark:text-white/90"},Fr={class:"text-sm font-medium text-gray-800 dark:text-white/90"},Nr={class:"text-sm font-medium text-gray-800 dark:text-white/90"},Xr={class:"text-sm font-medium text-gray-800 dark:text-white/90"},Yr={class:"no-scrollbar relative w-full max-w-[700px] overflow-y-auto rounded-3xl bg-white p-4 dark:bg-gray-900 lg:p-11"},Vr={class:"flex flex-col"},Zr={class:"px-2 overflow-y-auto custom-scrollbar"},qr={class:"grid grid-cols-1 gap-x-6 gap-y-5 lg:grid-cols-2"},Gr={class:"flex items-center gap-3 px-2 mt-6 lg:justify-end"},Jr=["disabled"],Kr=Pe({__name:"AddressCard",setup(e){const t=ot(),{userProfile:i,isLoading:n,loadProfile:a,updateProfile:r}=lt(),s=B(!1),l=B(!1),o=B({city:"",state:"",country:"",postalCode:""});st(async()=>{if(!i.value)try{await a()}catch(u){t.error(u.message||"Failed to load profile")}}),Qt(i,u=>{u!=null&&u.address&&(o.value={city:u.address.city||"",state:u.address.state||"",country:u.address.country||"",postalCode:u.address.postalCode||""})},{immediate:!0});const c=async()=>{l.value=!0;try{await r({address:o.value}),t.success("Address updated successfully"),s.value=!1}catch(u){console.error("Error saving address:",u),t.error(u.message||"Failed to save address")}finally{l.value=!1}};return(u,h)=>{var f,g,m,p,b,T,L,W;return w(),I("div",null,[d("div",Br,[d("div",jr,[d("div",Hr,[h[13]||(h[13]=d("h4",{class:"text-lg font-semibold text-gray-800 dark:text-white/90 mb-6"},"Address",-1)),z(n)?(w(),I("div",Ir,h[8]||(h[8]=[d("svg",{class:"animate-spin h-8 w-8 text-brand-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):(w(),I("div",Ur,[d("div",null,[h[9]||(h[9]=d("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"},"Country",-1)),d("p",_r,$(((g=(f=z(i))==null?void 0:f.address)==null?void 0:g.country)||"Not specified"),1)]),d("div",null,[h[10]||(h[10]=d("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"},"City",-1)),d("p",Fr,$(((p=(m=z(i))==null?void 0:m.address)==null?void 0:p.city)||"Not specified"),1)]),d("div",null,[h[11]||(h[11]=d("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"},"State",-1)),d("p",Nr,$(((T=(b=z(i))==null?void 0:b.address)==null?void 0:T.state)||"Not specified"),1)]),d("div",null,[h[12]||(h[12]=d("p",{class:"mb-2 text-xs leading-normal text-gray-500 dark:text-gray-400"},"Postal Code",-1)),d("p",Xr,$(((W=(L=z(i))==null?void 0:L.address)==null?void 0:W.postalCode)||"Not specified"),1)])]))]),d("button",{onClick:h[0]||(h[0]=k=>s.value=!0),class:"edit-button"},h[14]||(h[14]=[d("svg",{class:"fill-current",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.0911 2.78206C14.2125 1.90338 12.7878 1.90338 11.9092 2.78206L4.57524 10.116C4.26682 10.4244 4.0547 10.8158 3.96468 11.2426L3.31231 14.3352C3.25997 14.5833 3.33653 14.841 3.51583 15.0203C3.69512 15.1996 3.95286 15.2761 4.20096 15.2238L7.29355 14.5714C7.72031 14.4814 8.11172 14.2693 8.42013 13.9609L15.7541 6.62695C16.6327 5.74827 16.6327 4.32365 15.7541 3.44497L15.0911 2.78206ZM12.9698 3.84272C13.2627 3.54982 13.7376 3.54982 14.0305 3.84272L14.6934 4.50563C14.9863 4.79852 14.9863 5.2734 14.6934 5.56629L14.044 6.21573L12.3204 4.49215L12.9698 3.84272ZM11.2597 5.55281L5.6359 11.1766C5.53309 11.2794 5.46238 11.4099 5.43238 11.5522L5.01758 13.5185L6.98394 13.1037C7.1262 13.0737 7.25666 13.003 7.35947 12.9002L12.9833 7.27639L11.2597 5.55281Z",fill:""})],-1),Te(" Edit ")]))])]),s.value?(w(),E(ti,{key:0,onClose:h[7]||(h[7]=k=>s.value=!1)},{body:O(()=>[d("div",Yr,[d("button",{onClick:h[1]||(h[1]=k=>s.value=!1),class:"transition-color absolute right-5 top-5 z-999 flex h-11 w-11 items-center justify-center rounded-full bg-gray-100 text-gray-400 hover:bg-gray-200 hover:text-gray-600 dark:bg-gray-700 dark:bg-white/[0.05] dark:text-gray-400 dark:hover:bg-white/[0.07] dark:hover:text-gray-300"},h[15]||(h[15]=[d("svg",{class:"fill-current",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.04289 16.5418C5.65237 16.9323 5.65237 17.5655 6.04289 17.956C6.43342 18.3465 7.06658 18.3465 7.45711 17.956L11.9987 13.4144L16.5408 17.9565C16.9313 18.347 17.5645 18.347 17.955 17.9565C18.3455 17.566 18.3455 16.9328 17.955 16.5423L13.4129 12.0002L17.955 7.45808C18.3455 7.06756 18.3455 6.43439 17.955 6.04387C17.5645 5.65335 16.9313 5.65335 16.5408 6.04387L11.9987 10.586L7.45711 6.04439C7.06658 5.65386 6.43342 5.65386 6.04289 6.04439C5.65237 6.43491 5.65237 7.06808 6.04289 7.4586L10.5845 12.0002L6.04289 16.5418Z",fill:""})],-1)])),h[20]||(h[20]=d("div",{class:"px-2 pr-14"},[d("h4",{class:"mb-2 text-2xl font-semibold text-gray-800 dark:text-white/90"}," Edit Address "),d("p",{class:"mb-6 text-sm text-gray-500 dark:text-gray-400 lg:mb-7"}," Update your details to keep your profile up-to-date. ")],-1)),d("form",Vr,[d("div",Zr,[d("div",qr,[d("div",null,[h[16]||(h[16]=d("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Country ",-1)),q(d("input",{"onUpdate:modelValue":h[2]||(h[2]=k=>o.value.country=k),type:"text",placeholder:"Australia",class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[ie,o.value.country]])]),d("div",null,[h[17]||(h[17]=d("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," City ",-1)),q(d("input",{"onUpdate:modelValue":h[3]||(h[3]=k=>o.value.city=k),type:"text",placeholder:"Sydney",class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[ie,o.value.city]])]),d("div",null,[h[18]||(h[18]=d("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," State ",-1)),q(d("input",{"onUpdate:modelValue":h[4]||(h[4]=k=>o.value.state=k),type:"text",placeholder:"New South Wales",class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[ie,o.value.state]])]),d("div",null,[h[19]||(h[19]=d("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Postal Code ",-1)),q(d("input",{"onUpdate:modelValue":h[5]||(h[5]=k=>o.value.postalCode=k),type:"text",placeholder:"2000",class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[ie,o.value.postalCode]])])])]),d("div",Gr,[d("button",{onClick:h[6]||(h[6]=k=>s.value=!1),type:"button",class:"flex w-full justify-center rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03] sm:w-auto"}," Close "),d("button",{onClick:c,type:"button",disabled:l.value,class:"flex w-full justify-center rounded-lg bg-brand-500 px-4 py-2.5 text-sm font-medium text-white hover:bg-brand-600 disabled:opacity-50 disabled:cursor-not-allowed sm:w-auto"},$(l.value?"Saving...":"Save Changes"),9,Jr)])])])]),_:1})):oe("",!0)])}}}),Qr={class:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] lg:p-6"},ca={__name:"UserProfile",setup(e){const t=B("User Profile");return(i,n)=>(w(),E(Mi,null,{default:O(()=>[A(ki,{pageTitle:t.value},null,8,["pageTitle"]),d("div",Qr,[n[0]||(n[0]=d("h3",{class:"mb-5 text-lg font-semibold text-gray-800 dark:text-white/90 lg:mb-7"},"Profile",-1)),A(pr),A(Or),A(Kr)])]),_:1}))}};export{ca as default};
